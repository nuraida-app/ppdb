import{j as e,Q as w,S as F,M as G,r as t,Z as H,$ as R,a0 as Z,a1 as $,a2 as q,B}from"./index-E7E3HHSK.js";import{L as z}from"./Layout-tmITzfKy.js";import{N as O}from"./NotAllowed-B9Dyos-N.js";const W=()=>e.jsxs("button",{className:"btn btn-primary",type:"button",disabled:!0,children:[e.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Loading..."})]}),ea=()=>{const{user:n}=w(a=>a.user),{data:p}=F(n==null?void 0:n.id,{skip:!(n!=null&&n.id)}),{data:x}=G(n==null?void 0:n.id,{skip:!(n!=null&&n.id)}),s=x==null?void 0:x.address,[c,v]=t.useState("default"),[m,g]=t.useState("default"),[f,b]=t.useState("default"),[k,y]=t.useState("default"),[N,S]=t.useState(""),[C,A]=t.useState(""),[I,D]=t.useState(""),[P,M]=t.useState("default"),{data:l}=H(),{data:o}=R(c,{skip:c==="default"}),{data:d}=Z(m,{skip:m==="default"}),{data:r}=$(f,{skip:f==="default"}),[T,{data:E,isSuccess:K,isLoading:U,error:h,reset:j}]=q(),V=a=>{var Q,_,J,L;a.preventDefault();const i={provinsi:(Q=l==null?void 0:l.find(u=>u.id===c))==null?void 0:Q.nama,kota:(_=o==null?void 0:o.find(u=>u.id===m))==null?void 0:_.nama,kecamatan:(J=d==null?void 0:d.find(u=>u.id===f))==null?void 0:J.nama,desa:(L=r==null?void 0:r.find(u=>u.id===k))==null?void 0:L.nama,alamat:N,kode_pos:C,jarak:I,media:P};T(i)};return t.useEffect(()=>{K&&(B.success(E.message),j()),h&&(B.error(h.data.message),j())},[E,K,h,j]),t.useEffect(()=>{var a;s&&v(((a=l==null?void 0:l.find(i=>i.nama===(s==null?void 0:s.provinsi)))==null?void 0:a.id)||"default")},[s,l]),t.useEffect(()=>{var a;c!=="default"&&s&&g(((a=o==null?void 0:o.find(i=>i.nama===(s==null?void 0:s.kota)))==null?void 0:a.id)||"default")},[c,o,s]),t.useEffect(()=>{var a;m!=="default"&&s&&b(((a=d==null?void 0:d.find(i=>i.nama===(s==null?void 0:s.kecamatan)))==null?void 0:a.id)||"default")},[m,d,s]),t.useEffect(()=>{var a;f!=="default"&&s&&(y(((a=r==null?void 0:r.find(i=>i.nama===(s==null?void 0:s.desa)))==null?void 0:a.id)||"default"),S((s==null?void 0:s.alamat)||""),A((s==null?void 0:s.kode_pos)||""),D((s==null?void 0:s.jarak)||""),M((s==null?void 0:s.media)||"default"))},[f,r,s]),e.jsxs(z,{children:[e.jsx("h5",{className:"py-2 border-bottom",children:"Alamat"}),p!=null&&p.ket?e.jsxs("form",{className:"row",onSubmit:V,children:[e.jsxs("div",{className:"col-lg-6 col-12 py-2 d-flex flex-column gap-3",children:[e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"provinsi_id",value:c,onChange:a=>v(a.target.value),children:[e.jsx("option",{value:"default",children:"Pilih Provinsi"}),l==null?void 0:l.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]}),e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"kota_id",value:m,onChange:a=>g(a.target.value),children:[e.jsx("option",{value:"default",children:"Kota / Kabupaten"}),o==null?void 0:o.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]}),e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"kec_id",value:f,onChange:a=>b(a.target.value),children:[e.jsx("option",{value:"default",children:"Kecamatan"}),d==null?void 0:d.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]}),e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"desa_id",value:k,onChange:a=>y(a.target.value),children:[e.jsx("option",{value:"default",children:"Desa"}),r==null?void 0:r.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]}),e.jsx("textarea",{className:"form-control",placeholder:"Alamat",id:"floatingTextarea2",value:N,onChange:a=>S(a.target.value)})]}),e.jsxs("div",{className:"col-lg-6 col-12 py-2 d-flex flex-column gap-3",children:[e.jsx("input",{type:"text",className:"form-control",id:"floatingInput",placeholder:"Kode Pos",value:C,onChange:a=>A(a.target.value)}),e.jsx("input",{type:"text",className:"form-control",id:"floatingInput",placeholder:"Jarak Ke sekolah (tanpa km)",value:I,onChange:a=>D(a.target.value)}),e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"transport",value:P,onChange:a=>M(a.target.value),children:[e.jsx("option",{value:"default",children:"Transportasi"}),e.jsx("option",{value:"Mobil Pribadi",children:"Mobil Pribadi"}),e.jsx("option",{value:"Motor",children:"Motor"}),e.jsx("option",{value:"Angkutan Umum",children:"Angkutan Umum"}),e.jsx("option",{value:"Jemputan",children:"Jemputan"}),e.jsx("option",{value:"Jalan Kaki",children:"Jalan Kaki"}),e.jsx("option",{value:"Sepeda",children:"Sepeda"})]})]}),e.jsx("div",{className:"text-end",children:U?e.jsx(W,{}):e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Simpan"})})]}):e.jsx(O,{})]})};export{ea as default};
