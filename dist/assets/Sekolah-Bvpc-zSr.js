import{r as a,l as V,m as z,n as J,o as K,p as O,B as N,j as s}from"./index-E7E3HHSK.js";import{L as U,F as W}from"./Layout-tmITzfKy.js";import{I as X}from"./index-DZ6V0mav.js";import{M as y}from"./ModalComponent-DB39rCZA.js";import{S as L}from"./Spinner-CIKaKhhc.js";import{T as Y}from"./TableContainer-B0qFCEFe.js";const ns=()=>{var k;const[o,v]=a.useState(1),[c,C]=a.useState(10),[n,r]=a.useState(null),[b,i]=a.useState(""),[x,E]=a.useState(),[p,{data:t,isLoading:Z}]=V(),{data:l}=z(n,{skip:!n}),[M,{data:H,isSuccess:h,error:A,isLoading:g,reset:T}]=J(),[D,{data:j,isSuccess:d,error:m,isLoading:_,reset:f}]=K(),[w,{data:P,isSuccess:u,isLoading:S,error:R,reset:I}]=O(),B=()=>{M({id:n||null,name:b})},F=e=>{D(e)},G=()=>{i(""),r(null)};a.useEffect(()=>{(h||u||d)&&p({page:o,limit:c})},[h,u,d]),a.useEffect(()=>{p({page:o,limit:c,search:x})},[o,c,x]),a.useEffect(()=>{d&&(N.success(j.message),f()),m&&(N.error(m.data.message),f())},[d,j,m]),a.useEffect(()=>{l&&(i(l.nama),r(l.id))},[l]);const q=t==null?void 0:t.totalPages;return s.jsxs(U,{title:"Admin - Daftar Sekolah",children:[s.jsxs("div",{className:"container-fluid",children:[s.jsxs("div",{className:"container d-flex align-items-center justify-content-between mb-3",children:[s.jsx("p",{className:"m-0 fw-bold",children:"Sekolah"}),s.jsxs("div",{className:"d-flex gap-2",children:[s.jsxs("button",{type:"button",className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#sekolah",children:[s.jsx(X,{})," Tambah"]}),s.jsxs("button",{className:"btn btn-danger","data-bs-toggle":"modal","data-bs-target":"#hapus",children:[s.jsx(W,{})," Hapus"]})]})]}),s.jsx(Y,{page:o,totalPages:q,setPage:e=>v(e),setLimit:e=>C(e),onValue:e=>E(e),children:s.jsxs("table",{className:"table table-striped table-hover mt-2",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",children:"#"}),s.jsx("th",{scope:"col",children:"Nama Sekolah"}),s.jsx("th",{scope:"col",children:"Aksi"})]})}),s.jsx("tbody",{children:(k=t==null?void 0:t.schools)==null?void 0:k.map((e,Q)=>s.jsxs("tr",{children:[s.jsx("th",{scope:"row",children:Q+1}),s.jsx("td",{style:{textAlign:"start"},children:e.nama}),s.jsxs("td",{className:"d-flex align-items-center justify-content-center gap-2",children:[s.jsx("button",{className:"btn btn-warning","data-bs-toggle":"modal","data-bs-target":"#sekolah",onClick:()=>r(e.id),children:"Edit"})," ",s.jsx("button",{className:"btn btn-danger",onClick:()=>F(e.id),children:"Hapus"})]})]},e.id))})]})})]}),s.jsxs(y,{id:"sekolah",title:"Tambah Sekolah",data:H,isSuccess:h,error:A,reset:T,children:[s.jsx("div",{className:"modal-body",children:s.jsx("input",{type:"text",className:"form-control",id:"namaSekolah",placeholder:"Masukan Nama Sekolah",value:b||"",onChange:e=>i(e.target.value),required:!0})}),s.jsxs("div",{className:"modal-footer",children:[s.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:G,children:"Tutup"}),s.jsx("button",{type:"button",className:"btn btn-primary",onClick:B,disabled:!!g,children:g?s.jsx(L,{}):"Simpan"})]})]}),s.jsxs(y,{id:"hapus",title:" Hapus seluruh data sekolah",data:P,isSuccess:u,error:R,reset:I,children:[s.jsx("div",{className:"modal-body",children:"Apakah anda yakin ingin menghapus seluruh data sekolah?"}),s.jsxs("div",{className:"modal-footer",children:[s.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Batalkan"}),s.jsx("button",{type:"button",className:"btn btn-danger",onClick:w,disabled:!!S,children:S?s.jsx(L,{}):"Hapus"})]})]})]})};export{ns as default};
