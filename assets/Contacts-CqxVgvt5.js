import{r as t,f as H,bx as I,by as M,bz as R,B as i,j as e,G as j,P as T,X as S,D as v,q as N,$ as E,t as W}from"./index-BXyq61jM.js";import{L as $}from"./Layout-DLzo3XWz.js";import{d as w}from"./EditOutlined-BiHQ62O-.js";import{d as A}from"./DoNotDisturbOnOutlined-GjqOXmsO.js";import{T as Q}from"./TableContainer-CS2vQYjH.js";import{T as _}from"./Table-Nm2oIsnk.js";import{T as q}from"./TableHead-Bmx1h48_.js";import{T as z,a as n,b as X}from"./TableRow-BKcfXV0Y.js";import"./WhatsApp-CeeFueyS.js";const F=a=>a!=null&&a.startsWith("0")?`62${a.slice(1)}`:a,te=()=>{const[a,o]=t.useState(""),[p,l]=t.useState(""),[f,c]=t.useState(""),{data:d}=H(),{data:r}=I(a,{skip:!a}),[B,{data:h,isSuccess:g,error:u,isLoading:L,reset:b}]=M(),[P,{data:C,isSuccess:y,error:x,isLoading:k,reset:J}]=R(),D=s=>{s.preventDefault(),B({name:p,phone:f,id:a||null})},G=s=>P(s);return t.useEffect(()=>{r&&(l(r.nama),c(r.tlp),o(r.id))},[r]),t.useEffect(()=>{g&&(i.success(h.message),l(""),c(""),o(""),b()),u&&(b(),i.error(u.data.message))},[g,u,h]),t.useEffect(()=>{y&&i.success(C.message),x&&i.error(x.data.message)},[y,x,C]),e.jsx($,{children:e.jsxs(j,{container:!0,children:[e.jsx(j,{item:!0,size:{xs:12,md:8},children:e.jsx(T,{children:e.jsx(Q,{children:e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(z,{children:["No","Nama","No Whatsapp","Aksi"].map(s=>e.jsx(n,{align:"center",children:s},s))})}),e.jsx(X,{children:d==null?void 0:d.map((s,m)=>e.jsxs(z,{children:[e.jsx(n,{align:"center",children:m+1}),e.jsx(n,{children:s.nama}),e.jsx(n,{align:"center",children:s.tlp}),e.jsxs(n,{align:"center",children:[e.jsx(S,{color:"warning",onClick:()=>o(s.id),children:e.jsx(w,{})}),e.jsx(S,{color:"error",onClick:()=>G(s.id),children:k?e.jsx(v,{size:24}):e.jsx(A,{})})]})]},m))})]})})})}),e.jsx(j,{item:!0,size:{xs:12,md:4},sx:{py:1,px:4},children:e.jsx(T,{sx:{p:1},children:e.jsx("form",{onSubmit:D,children:e.jsxs(N,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(E,{type:"text",placeholder:"Nama",value:p,onChange:s=>l(s.target.value)}),e.jsx(E,{type:"number",placeholder:"No Whatsapp",value:f,onChange:s=>c(F(s.target.value))}),e.jsx(N,{alignSelf:"end",children:e.jsx(W,{variant:"contained",color:"success",type:"submit",children:L?e.jsx(v,{size:24}):"Simpan"})})]})})})})]})})};export{te as default};
