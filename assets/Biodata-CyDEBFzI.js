import{Q as w,S as G,M as T,g as z,l as K,c as M,V as A,r as c,B as g,j as e}from"./index-BU72W7iL.js";import{L as B}from"./Layout-BH6RVc04.js";import{N as E}from"./NotAllowed-CrssN4z5.js";const k=[{label:"Nama Lengkap",type:"text"},{label:"Tempat Lahir",type:"text"},{label:"Tanggal Lahir",type:"date"},{label:"Agama",type:"text"},{label:"Anak Ke",type:"number"},{label:"Jml Saudara",type:"number"},{label:"No Akta",type:"text"},{label:"No KK",type:"text"},{label:"NIK",type:"text"},{label:"NISN",type:"text"},{label:"TB",type:"text",placeholder:"Tanpa cm"},{label:"BB",type:"text",placeholder:"Tanpa kg"},{label:"Lingkar Kepala",type:"text",placeholder:"Tanpa cm"}],F=t=>{const n=new Date(t);if(isNaN(n.getTime()))return"";const r=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),p=String(n.getDate()).padStart(2,"0");return`${r}-${a}-${p}`},I=()=>{const{user:t}=w(l=>l.user),{data:n}=G(t==null?void 0:t.id,{skip:!(t!=null&&t.id)}),{data:r}=T(t==null?void 0:t.id,{skip:!(t!=null&&t.id)}),a=r==null?void 0:r.formulir,[p,{data:y={}}]=z(),{levels:u=[]}=y,[N,{data:v={}}]=K(),{schools:m=[]}=v,{data:d}=M(),[S,{data:x,isSuccess:f,isLoading:_,error:h,reset:b}]=A(),[s,j]=c.useState({}),o=l=>{const{name:i,value:C}=l.target;j(D=>({...D,[i]:C}))},L=l=>{l.preventDefault(),(s.Jenjang==="default"||s.sekolah==="default"||s.kelamin==="default")&&g.warning("data harus diisi"),S({body:s,userId:t==null?void 0:t.id})};return c.useEffect(()=>{p(1,100),N(1,100)},[]),c.useEffect(()=>{f&&(g.success(x.message),b()),h&&(g.error(h.data.message),b())},[x,f,h]),c.useEffect(()=>{a&&j({tapel:a==null?void 0:a.tapel_id,jenjang:a==null?void 0:a.jenjang_id,sekolah:a==null?void 0:a.sekolah_id,kelamin:a==null?void 0:a.kelamin,nama_lengkap:a==null?void 0:a.nama,tempat_lahir:a==null?void 0:a.tempat_lahir,tanggal_lahir:F(a==null?void 0:a.tanggal_lahir),agama:a==null?void 0:a.agama,anak_ke:a==null?void 0:a.anak_ke,jml_saudara:a==null?void 0:a.jml_saudara,no_akta:a==null?void 0:a.no_akta,no_kk:a==null?void 0:a.no_kk,nik:a==null?void 0:a.nik,nisn:a==null?void 0:a.nisn,tb:a==null?void 0:a.tinggi,bb:a==null?void 0:a.berat,lingkar_kepala:a==null?void 0:a.kepala})},[a]),e.jsxs(B,{children:[e.jsx("h5",{className:"py-2 border-bottom",children:"Data Diri Calon Siswa"}),n!=null&&n.ket?e.jsxs("form",{onSubmit:L,action:"",className:"row",children:[e.jsxs("div",{className:"col-md-6 col-sm-12 d-flex flex-column gap-3 py-2",children:[e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"tapel",value:s.tapel||"default",onChange:o,children:[e.jsx("option",{value:"default",children:"Tahun Pelajaran"}),d==null?void 0:d.map(l=>e.jsx("option",{value:l.id,children:l.tapel},l.id))]}),e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"jenjang",value:s.jenjang||"default",onChange:o,children:[e.jsx("option",{value:"default",children:"Pilih Jenjang"}),u==null?void 0:u.map(l=>e.jsx("option",{value:l.id,children:l.nama},l.id))]}),e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"sekolah",value:s.sekolah||"default",onChange:o,children:[e.jsx("option",{value:"default",children:"Pilih Sekolah"}),m==null?void 0:m.map(l=>e.jsx("option",{value:l.id,children:l.nama},l.id))]}),e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"kelamin",value:s.kelamin,onChange:o,children:[e.jsx("option",{value:"default",children:"Jenis Kelamin"}),e.jsx("option",{value:"f",children:"Perempuan"}),e.jsx("option",{value:"m",children:"Laki Laki"})]}),k.slice(0,5).map((l,i)=>e.jsxs("div",{className:"input-group ",children:[e.jsx("span",{style:{width:130},className:"input-group-text",id:"inputGroup-sizing-default",children:l.label}),e.jsx("input",{name:l.label.replace(/\s+/g,"_").toLocaleLowerCase(),type:l.type,className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",required:!0,value:s[l.label.replace(/\s+/g,"_").toLocaleLowerCase()]||"",onChange:o})]},i))]}),e.jsx("div",{className:"col-md-6 col-sm-12 d-flex flex-column gap-3 py-2",children:k.slice(5,14).map((l,i)=>e.jsxs("div",{className:"input-group ",children:[e.jsx("span",{style:{width:130},className:"input-group-text",id:"inputGroup-sizing-default",children:l.label}),e.jsx("input",{name:l.label.replace(/\s+/g,"_").toLocaleLowerCase(),type:l.type,className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",placeholder:l.placeholder,required:!0,value:s[l.label.replace(/\s+/g,"_").toLocaleLowerCase()]||"",onChange:o})]},i))}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{className:"btn btn-primary",children:_?e.jsx("div",{class:"spinner-border text-light",role:"status",children:e.jsx("span",{class:"visually-hidden",children:"Loading..."})}):"Simpan"})})]}):e.jsx(E,{})]})};export{I as default};
