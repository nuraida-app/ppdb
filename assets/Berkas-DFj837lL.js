import{Q as y,S as N,M as S,a4 as P,r as b,B as p,j as a}from"./index-BU72W7iL.js";import{L as A}from"./Layout-BH6RVc04.js";import{N as K}from"./NotAllowed-CrssN4z5.js";const g=[{label:"Kartu keluarga",name:"KK"},{label:"Akta Kelahiran",name:"Akta"},{label:"KTP Ayah",name:"Ayah"},{label:"KTP Ibu",name:"Ibu"},{label:"Ijazah / SKL",name:"IJSKL"},{label:"Rapot",name:"Rapot"},{label:"Foto",name:"Foto"}],E=()=>{const{user:s}=y(e=>e.user),{data:o}=N(s==null?void 0:s.id,{skip:!(s!=null&&s.id)}),{data:r}=S(s==null?void 0:s.id,{skip:!(s!=null&&s.id)}),i=r==null?void 0:r.documents,[h,{data:f,isSuccess:u,isLoading:B,error:c,reset:x}]=P(),t=b.useRef({}),j=async(e,l)=>{const n=e.target.files[0];if(n){const m=l==="Foto"?["image/jpeg","image/png","image/jpg"]:["application/pdf"],F=l==="Foto"?4*1024*1024:10*1024*1024;if(!m.includes(n.type)||n.size>F){p.error("File tidak sesuai");return}const d=new FormData;d.append(l,n),d.append("name",l),h(d)}};b.useEffect(()=>{u&&(p.success(f.message),x(),Object.keys(t.current).forEach(e=>{t.current[e]&&(t.current[e].value="")})),c&&(p.error(c.data.message),x())},[f,u,c]);const k=e=>{window.open(e,"_blank")};return a.jsxs(A,{children:[a.jsxs("div",{className:"container d-flex flex-column py-2 border-bottom mb-3",children:[a.jsx("h5",{className:"m-0",children:"Upload Berkas"}),a.jsxs("p",{className:"text-secondary fst-italic",children:["Pastikan berkas yang diupload sesuai dengan ketentuan ",a.jsx("br",{}),"Semua file ",a.jsx("strong",{children:"WAJIB SCAN PDF"}),", Foto"," ",a.jsx("strong",{children:"JPG / JPEG / PNG"})]}),a.jsx("p",{className:"text-secondary fst-italic",children:"Foto 3x4 (max 4mb), SMP (Latar Merah Berseragam SD), SMA (Latar Biru Berseragam SMP)"})]}),a.jsx("div",{className:"container d-flex flex-wrap gap-2 my-3",children:g.map((e,l)=>{const n=i==null?void 0:i.find(m=>m.file_name===e.name);return a.jsx("button",{className:`btn ${n?"btn-success":"btn-danger"}`,onClick:()=>k(n.file_link),children:e.label},l)})}),o!=null&&o.ket?a.jsx("div",{className:"container d-flex flex-column gap-2",children:g.map((e,l)=>a.jsxs("div",{children:[a.jsx("label",{htmlFor:"kk",className:"form-label",children:e.label}),a.jsx("input",{type:"file",className:"form-control",ref:n=>t.current[e.name]=n,id:e.name,name:e.name,onChange:n=>j(n,e.name)})]},l))}):a.jsx(K,{})]})};export{E as default};
