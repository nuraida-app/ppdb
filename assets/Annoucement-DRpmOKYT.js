import{r as a,u as G,av as H,aw as I,ax as _,B as o,j as e,P as h,s as W,G as j,d as C,z as k,C as S,T as D,e as J}from"./index-C2nBX7QG.js";import{L as K}from"./Layout-C20c01LT.js";import{E as Q}from"./Editor-DrEwoNDG.js";import{d as R}from"./EditOutlined-dIVNS1oM.js";import{d as F}from"./DoNotDisturbOnOutlined-6U0CUkD-.js";import{T as N}from"./TableContainer-F9nuIoYK.js";import{T as V}from"./Table-D9-S9Xm5.js";import{T as $}from"./TableHead-BKk-Fma7.js";import{T as w,a as i,b as q}from"./TableRow-BPe-Hqaj.js";const O=[{label:"No",width:80},{label:"Judul",width:100},{label:"Konten",width:100},{label:"Aksi",width:120}],U=r=>({__html:r}),ie=()=>{const r="pengumuman",[l,f]=a.useState(""),[d,E]=a.useState(""),[g,c]=a.useState(""),{data:u}=G(r),{data:t}=H(l,{skip:!l});console.log(t);const[v,{data:p,isSuccess:b,error:x,isLoading:L,reset:T}]=I(),[z,{data:P,isSuccess:y,error:m,isLoading:B}]=_(),M=()=>{v({category:r,value:g,id:l||null,title:d||null})},A=s=>{z({id:s,category:r})};return a.useEffect(()=>{t&&c(t==null?void 0:t.teks)},[t]),a.useEffect(()=>{b&&(o.success(p.message),c(""),f(""),T()),x&&(T(),o.error(x.data.message))},[b,x,p]),a.useEffect(()=>{y&&o.success(P.message),m&&o.error(m.data.message)},[y,m,P]),e.jsxs(K,{children:[e.jsx(h,{sx:{p:1,mb:1},children:e.jsx(W,{variant:"h6",fontWeight:"bold",children:"Pengumuman"})}),e.jsxs(j,{container:!0,children:[e.jsx(j,{item:!0,size:{xs:12,md:8},children:e.jsx(h,{children:e.jsx(N,{children:e.jsxs(V,{children:[e.jsx($,{children:e.jsx(w,{children:O.map((s,n)=>e.jsx(i,{align:"center",sx:{minWidth:s.width},children:s.label},n))})}),e.jsx(q,{children:u==null?void 0:u.map((s,n)=>e.jsxs(w,{children:[e.jsx(i,{align:"center",children:n+1}),e.jsx(i,{align:"center",sx:{verticalAlign:"top"},children:s.judul}),e.jsx(i,{children:e.jsx(C,{dangerouslySetInnerHTML:U(s.teks)})}),e.jsxs(i,{align:"center",children:[e.jsx(k,{color:"warning",onClick:()=>f(s.id),children:e.jsx(R,{})}),e.jsx(k,{color:"error",onClick:()=>A(s.id),children:B?e.jsx(S,{size:24}):e.jsx(F,{})})]})]},n))})]})})})}),e.jsx(j,{item:!0,size:{xs:12,md:4},sx:{px:2},children:e.jsxs(h,{sx:{p:1},children:[e.jsx(D,{fullWidth:!0,label:"Judul",sx:{mb:1},value:d,onChange:s=>E(s.target.value)}),e.jsx(Q,{placeholder:"Ketik Di Sini...",value:g,onChange:s=>c(s)}),e.jsx(C,{sx:{display:"flex",justifyContent:"end",mt:1},children:e.jsx(J,{variant:"contained",color:"success",onClick:M,children:L?e.jsx(S,{size:24}):"Simpan"})})]})})]})]})};export{ie as default};
