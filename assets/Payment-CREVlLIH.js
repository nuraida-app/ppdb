import{E as G,H as N,j as e,ah as U,e as $,n as O,af as Q,ai as V,aj as A,r as c,B as k,L as K,G as j,O as p,P as o,q as m,t as x,F as W,I as Y,S as J,M as i,T as X,$ as Z,D as ee}from"./index-NerRiSST.js";import{R as ae,d as se}from"./index-BWr0QDWw.js";import{T as re}from"./Table-BzzLty94.js";import{b as te,T as g,a as t}from"./TableRow-BWdoY684.js";var f={},ne=N;Object.defineProperty(f,"__esModule",{value:!0});var w=f.default=void 0,ie=ne(G()),le=e;w=f.default=(0,ie.default)((0,le.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V6h5.17l2 2H20zM9.41 14.42 11 12.84V17h2v-4.16l1.59 1.59L16 13.01 12.01 9 8 13.01z"}),"DriveFolderUploadOutlined");const ce=n=>({__html:n}),je=()=>{const{data:n}=U(),{data:h}=$(),{user:r}=O(s=>s.user);Q(r==null?void 0:r.id,{skip:!(r!=null&&r.id)});const u=h==null?void 0:h.filter(s=>s.kategori==="pembayaran"),[T,{data:b,isSuccess:v,isLoading:S,error:d,reset:y}]=V(),{data:a,isLoading:de,refetch:L}=A(r==null?void 0:r.id,{skip:!(r!=null&&r.id)}),[B,C]=c.useState(null),[D,F]=c.useState(""),[P,R]=c.useState("Instagram"),_=s=>{const l=s.replace(/[^\d]/g,"");return`Rp ${parseInt(l,10).toLocaleString("id-ID")}`},M=s=>s.replace(/[^\d]/g,""),H=s=>{F(_(s.target.value))},q=s=>{const l=s.target.files[0];C(l)},z=()=>{const s=new FormData;s.append("name",r.name),s.append("media",P),s.append("price",M(D)),s.append("file",B),T(s)},E=()=>{window.open(a.bukti,"_blank")};c.useEffect(()=>{v&&(k.success(b.message),y(),L()),d&&(console.log(d),k.error(d.data.message),y())},[v,d,b]);const I=c.useRef();return e.jsx(K,{children:e.jsxs(j,{container:!0,children:[e.jsxs(j,{item:!0,size:{xs:12,md:8},sx:{p:2,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(p,{variant:"h5",children:"Pembayaran"}),(a==null?void 0:a.status)==="Terkonfirmasi"&&e.jsx(o,{sx:{p:1},children:e.jsxs(m,{ref:I,sx:{display:"flex",flexDirection:"column",gap:1,p:1},children:[e.jsx("img",{src:n==null?void 0:n.kop_surat,style:{height:120,objectFit:"cover"}}),e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{width:"200px"},children:"Invoice"}),e.jsx("td",{align:"center",style:{width:"15px"},children:":"}),e.jsx("td",{children:e.jsx("p",{children:new Date(a==null?void 0:a.createdat).getTime()})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Tanggal Pembayaran"}),e.jsx("td",{align:"center",children:":"}),e.jsx("td",{children:e.jsx("p",{children:new Date(a==null?void 0:a.createdat).toLocaleDateString("id-ID",{hour:"numeric",minute:"numeric"})})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{width:"200px"},children:"Atas Nama"}),e.jsx("td",{align:"center",style:{width:"15px"},children:":"}),e.jsx("td",{children:r==null?void 0:r.name})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{width:"200px"},children:"Pembayaran"}),e.jsx("td",{align:"center",style:{width:"15px"},children:":"}),e.jsx("td",{children:"PPDB"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{width:"200px"},children:"Nominal"}),e.jsx("td",{align:"center",style:{width:"15px"},children:":"}),e.jsx("td",{children:`Rp ${parseFloat(a==null?void 0:a.nominal).toLocaleString("id-ID")}`})]})]})}),e.jsxs(m,{alignSelf:"end",sx:{width:200,height:100,display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("p",{children:`Bogor, ${new Date(a==null?void 0:a.createdat).toLocaleDateString("id-ID")}`}),e.jsx("img",{src:n==null?void 0:n.cap,alt:"logo",style:{height:"50px",width:"50px",objectFit:"cover"}}),e.jsx("p",{children:"Petugas PPDB"})]})]})}),e.jsx(o,{sx:{p:1},children:u==null?void 0:u.map((s,l)=>e.jsx(p,{variant:"body1",dangerouslySetInnerHTML:ce(s.teks)},l))})]}),e.jsxs(j,{item:!0,size:{xs:12,md:4},sx:{p:2,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(p,{variant:"h6",children:"Upload Bukti Pembayaran"}),e.jsx(o,{children:e.jsx(re,{children:e.jsxs(te,{children:[e.jsxs(g,{children:[e.jsx(t,{children:"Status"}),e.jsx(t,{align:"center",children:":"}),e.jsx(t,{children:e.jsx(x,{variant:"contained",color:"warning",sx:{textTransform:"none"},children:a!=null&&a.status?a.status:"Belum ada pembayaran"})})]}),a&&e.jsxs(g,{children:[e.jsx(t,{children:"Berkas"}),e.jsx(t,{align:"center",children:":"}),e.jsx(t,{children:e.jsx(x,{variant:"contained",color:"info",sx:{textTransform:"none"},onClick:E,children:"Link"})})]}),(a==null?void 0:a.status)==="Terkonfirmasi"&&e.jsxs(g,{children:[e.jsx(t,{children:"Invoice"}),e.jsx(t,{align:"center",children:":"}),e.jsx(t,{children:e.jsx(ae,{trigger:()=>e.jsx(x,{variant:"contained",color:"success",startIcon:e.jsx(se,{}),children:"Print"}),content:()=>I.current})})]})]})})}),!a&&e.jsxs(o,{sx:{p:1,display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(W,{children:[e.jsx(Y,{children:"Didapatkan dari mana informasi Nuraida?"}),e.jsxs(J,{label:"Didapatkan dari mana informasi Nuraida?",value:P,onChange:s=>R(s.target.value),required:!0,children:[e.jsx(i,{value:"Instagram",children:"Instagram"}),e.jsx(i,{value:"YouTube",children:"YouTube"}),e.jsx(i,{value:"Brosur",children:"Brosur"}),e.jsx(i,{value:"Pameran",children:"Pameran"}),e.jsx(i,{value:"Website",children:"Website"}),e.jsx(i,{value:"Kerabat",children:"Kerabat"})]})]}),e.jsx(X,{label:"Nominal Pembayaran",size:"small",placeholder:"9000000",required:!0,slotProps:{inputLabel:{shrink:!0}},value:D,onChange:H}),e.jsx(Z,{type:"file",onChange:q,accept:"images/*"}),e.jsx(m,{alignSelf:"end",children:e.jsx(x,{variant:"contained",color:"success",startIcon:e.jsx(w,{}),onClick:z,children:S?e.jsx(ee,{size:24}):"Upload"})})]})]})]})})};export{je as default};
