import{bF as J,r as s,bG as V,bH as Y,bI as Z,B as i,j as e,P as ee,O as ae,$ as se,k as _,l as I,X as te,ag as re,M as j}from"./index-CqOSVadL.js";import{L as ne}from"./Layout-0c6SHDTk.js";import{d as oe}from"./MoreVert-8H_D5SBj.js";/* empty css               */import{L,d as B}from"./WhatsApp-B1hSZ4ba.js";import{T as ce}from"./TableContainer-BPVXaO6J.js";import{T as le}from"./Table-yORRcbvb.js";import{T as ie}from"./TableHead-BwpoCjbQ.js";import{T as E,a as r,b as de}from"./TableRow-DCI6Frbi.js";import{T as ue}from"./TablePagination-BD2PhsVD.js";import"./KeyboardArrowRight-CUXTIshQ.js";const he=[{label:"No",width:40},{label:"Kode Pendaftaran",width:80},{label:"Pendaftar",width:120},{label:"Whatsapp",width:120},{label:"Status",width:80},{label:"Aksi",width:30}],ye=()=>{var R;const M=J(),[b,f]=s.useState(null),[d,N]=s.useState(""),[$,A]=s.useState(""),[w,H]=s.useState(""),[c,P]=s.useState(0),[o,W]=s.useState(10),[pe,F]=s.useState([]),u=!!b,G=(a,t,x,z)=>{f(a.currentTarget),N(t),A(x),F(z||[])},h=()=>{f(null)},[O,{data:C,isSuccess:T,error:p,reset:k}]=V(),[D,{data:y,isSuccess:S,error:m,reset:v}]=Y(),{data:g}=Z(),l=g==null?void 0:g.filter(a=>a.status_pendaftaran==="Diproses");console.log(l);const n=l==null?void 0:l.filter(a=>a.nama!==null&&a.nama.toLowerCase().includes(w.toLowerCase())),K=()=>{O(d),h()},Q=()=>{D(d),h()};s.useEffect(()=>{T&&(i.success(C.message),k()),p&&(i.error(p.data.message),k())},[C,T,p]),s.useEffect(()=>{S&&(i.success(y.message),v()),m&&(i.error(m.data.message),v())},[y,S,m]);const U=(a,t)=>{P(t)},X=a=>{W(parseInt(a.target.value,10)),P(0)},q=()=>{const a=$.replace(/\s+/g,"-");M(`/admin/pelajar/${d}/${a}`)};return e.jsxs(ne,{children:[e.jsxs(ee,{sx:{p:1},children:[e.jsx(ae,{variant:"h6",fontWeight:"bold",children:"Pendaftar Baru"}),e.jsx(se,{type:"text",placeholder:"Nama",value:w,onChange:a=>H(a.target.value),sx:{my:1}}),e.jsx(ce,{children:e.jsxs(le,{children:[e.jsx(ie,{children:e.jsx(E,{children:he.map((a,t)=>e.jsx(r,{align:"center",sx:{minWidth:a.width},children:a.label},t))})}),e.jsx(de,{children:(R=n==null?void 0:n.slice(c*o,c*o+o))==null?void 0:R.map((a,t)=>e.jsxs(E,{children:[e.jsx(r,{align:"center",children:c*o+t+1}),e.jsx(r,{align:"center",children:a.kode_pendaftaran}),e.jsx(r,{children:a.nama}),e.jsxs(r,{children:[e.jsxs(L,{onClick:()=>window.open(`https://wa.me/${a.tlp_ayah}`,"_blank"),children:[e.jsx(_,{children:e.jsx(B,{color:"success"})}),e.jsx(I,{primary:"Ayah",secondary:a.tlp_ayah})]}),e.jsxs(L,{onClick:()=>window.open(`https://wa.me/${a.tlp_ibu}`,"_blank"),children:[e.jsx(_,{children:e.jsx(B,{color:"success"})}),e.jsx(I,{primary:"ibu",secondary:a.tlp_ibu})]})]}),e.jsx(r,{align:"center",children:e.jsx("div",{className:"menunggu",children:a.status_pendaftaran})}),e.jsx(r,{align:"center",children:e.jsx(te,{color:"primary",id:"basic-button","aria-controls":u?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":u?"true":void 0,onClick:x=>G(x,a.userid,a.nama,a.berkas),children:e.jsx(oe,{})})})]},t))})]})}),e.jsx(ue,{component:"div",count:(n==null?void 0:n.length)||0,page:c,onPageChange:U,rowsPerPage:o,onRowsPerPageChange:X,rowsPerPageOptions:[10,25,50],labelRowsPerPage:"Rows per page"})]}),e.jsxs(re,{id:"basic-menu",anchorEl:b,open:u,onClose:h,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(j,{onClick:K,children:"Diterima"}),e.jsx(j,{onClick:Q,children:"Ditolak"}),e.jsx(j,{onClick:q,children:"Detail"})]})]})};export{ye as default};
