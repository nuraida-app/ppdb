import{a as ie,b as Ee,c as Ge,r as t,B as L,j as e,d as T,F as R,I as q,S as E,M as d,T as c,e as O,f as Be,g as $e,h as Le,i as ze,k as Ke,l as Ae,C as de,m as Se,n as fe,o as Je,p as Qe,q as pe,s as ve,t as He,v as Oe,w as Ve,x as Ue,y as We,P as Fe,z as he,D as Ye,E as Xe,H as Ze,J as we,K as ea,N as aa,O as na,Q as sa,R as ta,U as ia,V as la,L as ra,G as ce,W as da}from"./index-C2nBX7QG.js";import{d as Me}from"./EditOutlined-dIVNS1oM.js";import{T as ye}from"./Table-D9-S9Xm5.js";import{T as Re}from"./TableHead-BKk-Fma7.js";import{T as ue,a as H,b as ke}from"./TableRow-BPe-Hqaj.js";import{B as oa}from"./ButtonGroup-BomsUINC.js";const xe=n=>{const a=new Date(n);if(isNaN(a.getTime()))return"";const f=a.getFullYear(),g=String(a.getMonth()+1).padStart(2,"0"),s=String(a.getDate()).padStart(2,"0");return`${f}-${g}-${s}`},ua=({tapel:n,edu:a,schools:f})=>{const{user:g}=ie(i=>i.user),{data:s}=Ee(g==null?void 0:g.id,{skip:!(g!=null&&g.id)}),[F,{data:_,isSuccess:b,isLoading:r,error:P,reset:m}]=Ge(),[h,N]=t.useState(""),[x,j]=t.useState(""),[S,y]=t.useState(""),[A,v]=t.useState(""),[p,z]=t.useState(""),[k,o]=t.useState(""),[C,B]=t.useState(""),[J,Z]=t.useState(""),[X,V]=t.useState(""),[Q,U]=t.useState(""),[W,w]=t.useState("f"),[ee,ae]=t.useState("islam"),[ne,se]=t.useState(""),[u,D]=t.useState(""),[M,K]=t.useState(""),[G,te]=t.useState(""),[le,oe]=t.useState(""),me=i=>{if(i.preventDefault(),!(l=>{const I=/^\d{4}-\d{2}-\d{2}$/;if(!l.match(I))return!1;const $=new Date(l);return $ instanceof Date&&!isNaN($)})(xe(Q))){L.error("Tanggal Lahir harus dalam format tahun-bulan-tanggal");return}const ge={userId:g==null?void 0:g.id,tapelId:h,eduId:x,schoolId:S,nisn:A,noKk:p,nik:k,noAkta:C,namaLengkap:J,tempatLahir:X,tanggalLahir:xe(Q),jenisKelamin:W,agama:ee,anakKe:ne,jumlahSaudara:u,tinggiBadan:M,beratBadan:G,lingkarKepala:le};F(ge)};return t.useEffect(()=>{s&&(N(s==null?void 0:s.tapel_id),j(s==null?void 0:s.jenjang_id),y(s==null?void 0:s.sekolah_id),v(s==null?void 0:s.nisn),z(s==null?void 0:s.no_kk),o(s==null?void 0:s.nik),B(s==null?void 0:s.no_akta),Z(s==null?void 0:s.nama),V(s==null?void 0:s.tempat_lahir),U(xe(s==null?void 0:s.tanggal_lahir)),w(s==null?void 0:s.kelamin),ae(s==null?void 0:s.agama),se(s==null?void 0:s.anak_ke),D(s==null?void 0:s.jml_saudara),K(s==null?void 0:s.tinggi),te(s==null?void 0:s.berat),oe(s==null?void 0:s.kepala))},[s]),t.useEffect(()=>{b&&(L.success(_.message),m(),N(""),j(""),y(""),v(""),z(""),o(""),B(""),Z(""),V(""),U(""),w(""),ae(""),se(""),D(""),K(""),te(""),oe("")),P&&(L.error(P.data.message),m())},[b,_,P]),e.jsx(T,{sx:{mt:2},children:e.jsxs("form",{className:"formulir",onSubmit:me,children:[e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Tahun Pelajaran"}),e.jsx(E,{label:"Tahun Pelajaran",value:h||"",onChange:i=>N(i.target.value),children:n==null?void 0:n.map(i=>e.jsx(d,{value:i.id,children:i.tapel},i.id))})]}),e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Jenjang"}),e.jsx(E,{label:"Jenjang",value:x||"",onChange:i=>j(i.target.value),children:a==null?void 0:a.map(i=>e.jsx(d,{value:i.id,children:i.nama},i.id))})]}),e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Sekolah"}),e.jsx(E,{label:"Sekolah",value:S||"",onChange:i=>y(i.target.value),children:f==null?void 0:f.map(i=>e.jsx(d,{value:i.id,children:i.nama},i.id))})]}),e.jsx(c,{required:!0,label:"NISN",type:"number",size:"small",value:A||"",onChange:i=>v(i.target.value)}),e.jsx(c,{required:!0,label:"No KK",type:"number",size:"small",value:p||"",onChange:i=>z(i.target.value)}),e.jsx(c,{required:!0,label:"NIK",type:"number",size:"small",value:k||"",onChange:i=>o(i.target.value)}),e.jsx(c,{required:!0,label:"No Akta Lahir",type:"number",size:"small",value:C||"",onChange:i=>B(i.target.value)}),e.jsx(c,{required:!0,label:"Nama Lengkap",size:"small",value:J||"",onChange:i=>Z(i.target.value)}),e.jsxs(T,{sx:{display:"flex",gap:1},children:[e.jsx(c,{required:!0,label:"Tempat Lahir",size:"small",value:X||"",onChange:i=>V(i.target.value)}),e.jsx(c,{required:!0,label:"Tanggal Lahir",type:"date",size:"small",slotProps:{inputLabel:{shrink:!0}},value:Q||"",onChange:i=>U(i.target.value)})]}),e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Jenis Kelamin"}),e.jsxs(E,{value:W||"",onChange:i=>w(i.target.value),label:"Jenis Kelamin",children:[e.jsx(d,{value:"f",children:"Perempuan"}),e.jsx(d,{value:"m",children:"Laki Laki"})]})]}),e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Agama"}),e.jsxs(E,{value:ee||"",onChange:i=>ae(i.target.value),label:"Agama",children:[e.jsx(d,{value:"islam",children:"Islam"}),e.jsx(d,{value:"hindu",children:"Hindu"}),e.jsx(d,{value:"budha",children:"Budha"}),e.jsx(d,{value:"kristen",children:"Kristen"}),e.jsx(d,{value:"other",children:"Lainnya"})]})]}),e.jsx(c,{required:!0,label:"Anak Ke",type:"number",size:"small",value:ne||"",onChange:i=>se(i.target.value)}),e.jsx(c,{required:!0,label:"Jumlah Saudara",type:"number",size:"small",value:u||"",onChange:i=>D(i.target.value)}),e.jsxs(T,{sx:{display:"flex",gap:1},children:[e.jsx(c,{required:!0,label:"Tinggi Badan",type:"number",size:"small",value:M||"",onChange:i=>K(i.target.value)}),e.jsx(c,{required:!0,label:"Berat Badan",type:"number",size:"small",value:G||"",onChange:i=>te(i.target.value)}),e.jsx(c,{required:!0,label:"Lingkar Kepala",type:"number",size:"small",value:le||"",onChange:i=>oe(i.target.value)})]}),e.jsx(T,{alignSelf:"end",children:e.jsx(O,{sx:{textTransform:"none"},variant:"contained",color:"success",type:"submit",children:"Simpan"})})]})})},ca=()=>e.jsx("div",{children:e.jsxs("p",{children:["Petuntuk Pengisian Formulir:",e.jsx("br",{}),e.jsx("br",{}),"1. Pastikan semua data sesuai dengan dokomen resmi, sperti No KK, NIK, No Akta Penulisan Nama",e.jsx("br",{}),e.jsx("br",{}),"2. Patikan FIle yang akan di upload sudah berupa file PDF dan jpg / png / jpeg untuk Foto",e.jsx("br",{}),e.jsx("br",{}),"3. Jika terjadi kendala dapat menghubugni admin melalui Live Chat"]})}),ha=()=>{const{user:n}=ie(l=>l.user),{data:a}=Be(n==null?void 0:n.id,{skip:!(n!=null&&n.id)}),[f,{data:g,isSuccess:s,isLoading:F,error:_,reset:b}]=$e(),[r,P]=t.useState(!0),[m,h]=t.useState(""),[N,x]=t.useState(""),[j,S]=t.useState(""),[y,A]=t.useState(""),[v,p]=t.useState(""),[z,k]=t.useState(""),[o,C]=t.useState(""),[B,J]=t.useState(""),[Z,X]=t.useState(""),[V,Q]=t.useState(""),[U,W]=t.useState("Jalan Kaki"),[w,ee]=t.useState({id:"",nama:""}),[ae,ne]=t.useState({id:"",nama:""}),[se,u]=t.useState({id:"",nama:""}),[D,M]=t.useState({id:"",nama:""}),{data:K}=Le(),{data:G}=ze(N,{skip:!N}),{data:te}=Ke(j,{skip:!j}),{data:le}=Ae(y,{skip:!y}),oe=l=>{var Y;const I=l.target.value,$=((Y=K.find(re=>re.id===I))==null?void 0:Y.nama)||"";ee({id:I,nama:$}),x(I)},me=l=>{var Y;const I=l.target.value,$=((Y=G.find(re=>re.id.trim()===I))==null?void 0:Y.nama)||"";ne({id:I,nama:$}),S(I)},i=l=>{var Y;const I=l.target.value,$=((Y=te.find(re=>re.id.trim()===I))==null?void 0:Y.nama)||"";u({id:I,nama:$}),A(I)},Te=l=>{var Y;const I=l.target.value,$=((Y=le.find(re=>re.id.trim()===I))==null?void 0:Y.nama)||"";M({id:I,nama:$}),p(I)},ge=()=>{var I;const l={userId:n.id,negara:r?"Indonesia":m,provinsi_id:w.id,provinsi:w.nama,regional_id:ae.id.trim(),regional:ae.nama,kec_id:se.id.trim(),kecamatan:se.nama,desa_id:(I=D.id)==null?void 0:I.trim(),desa:D.nama,alamat:z,rt_rw:o||null,kode_pos:B||null,jarak:Z,menit:V,transportasi:U};f(l)};return t.useEffect(()=>{s&&(L.success(g.message),b(),h(""),x(""),S(""),A(""),p(""),k(""),C(""),J(""),X(""),Q(""),W(""),ee(""),ne(""),u(""),M("")),_&&(L.error(_.data.message),b())},[s,g,_]),t.useEffect(()=>{var l,I,$;a&&((a==null?void 0:a.negara)==="Indonesia"?P(!0):h(a==null?void 0:a.negara),x(a==null?void 0:a.provinsi_id),ee({id:a==null?void 0:a.provinsi_id,nama:a==null?void 0:a.provinsi}),S(a==null?void 0:a.regional_id),ne({id:a==null?void 0:a.regional_id,nama:a==null?void 0:a.regional}),A((l=a==null?void 0:a.kec_id)==null?void 0:l.trim()),u({id:(I=a==null?void 0:a.kec_id)==null?void 0:I.trim(),nama:a==null?void 0:a.kecamatan}),p(($=a==null?void 0:a.desa_id)==null?void 0:$.trim()),M({id:a==null?void 0:a.desa_id,nama:a==null?void 0:a.desa}),k(a==null?void 0:a.alamat),C(a==null?void 0:a.rt_rw),J(a==null?void 0:a.kode_pos),X(a==null?void 0:a.jarak),Q(a==null?void 0:a.menit),W(a==null?void 0:a.transportasi))},[a]),e.jsx(T,{sx:{mt:1},children:e.jsxs("form",{className:"formulir",children:[e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Negara"}),e.jsxs(E,{value:r,label:"Negara",onChange:()=>P(!r),children:[e.jsx(d,{value:!0,children:"Indonesia"}),e.jsx(d,{value:!1,children:"Luar Negeri"})]})]}),!r&&e.jsx(c,{label:"Negara Asal",size:"small",value:m||"",onChange:l=>h(l.target.value)}),r&&e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Provinsi"}),e.jsx(E,{value:N||"",label:"Provinsi",onChange:oe,children:K==null?void 0:K.map(l=>e.jsx(d,{value:l.id,children:l.nama},l.id))})]}),r&&e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Kota / Kabupaten"}),e.jsx(E,{value:j||"",label:"Kota / Kabupaten",onChange:me,children:G==null?void 0:G.map(l=>e.jsx(d,{value:l.id,children:l.nama},l.id))})]}),r&&e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Kecamatan"}),e.jsx(E,{value:y||"",label:"Kecamatan",onChange:i,children:te==null?void 0:te.map(l=>e.jsx(d,{value:l.id.trim(),children:l.nama},l.id.trim()))})]}),r&&e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Desa / Kelurahan"}),e.jsx(E,{value:v||"",label:"Desa / Kelurahan",onChange:Te,children:le==null?void 0:le.map(l=>e.jsx(d,{value:l.id.trim(),children:l.nama},l.id.trim()))})]}),e.jsx(c,{required:!0,label:"Alamat",size:"small",value:z||"",onChange:l=>k(l.target.value)}),e.jsxs(T,{sx:{display:"flex",gap:1},children:[r&&e.jsx(c,{label:"RT / Rw",size:"small",value:o||"",onChange:l=>C(l.target.value)}),e.jsx(c,{label:"Kode Pos",size:"small",value:B||"",onChange:l=>J(l.target.value)})]}),e.jsxs(T,{sx:{display:"flex",gap:1},children:[e.jsx(c,{label:"Jarak Ke Sekolah",size:"small",value:Z||"",onChange:l=>X(l.target.value)}),e.jsx(c,{label:"Menit ke Sekolah",size:"small",value:V||"",onChange:l=>Q(l.target.value)}),e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Transportasi"}),e.jsxs(E,{value:U||"",label:"Transportasi",onChange:l=>W(l.target.value),children:[e.jsx(d,{value:"Jalan Kaki",children:"Jalan Kaki"}),e.jsx(d,{value:"Angkutan Umum",children:"Angkutan Umum"}),e.jsx(d,{value:"Sepeda Motor",children:"Sepeda Motor"}),e.jsx(d,{value:"Sepeda",children:"Sepeda"})]})]})]}),e.jsx(T,{alignSelf:"end",children:e.jsx(O,{variant:"contained",color:"success",sx:{textTransform:"none"},onClick:ge,children:F?e.jsx(de,{size:24}):"Simpan"})})]})})};var _e={},ma=fe;Object.defineProperty(_e,"__esModule",{value:!0});var be=_e.default=void 0,ga=ma(Se()),xa=e;be=_e.default=(0,ga.default)((0,xa.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");const Ne=n=>{const a=new Date(n);if(isNaN(a.getTime()))return"";const f=a.getFullYear(),g=String(a.getMonth()+1).padStart(2,"0"),s=String(a.getDate()).padStart(2,"0");return`${f}-${g}-${s}`},ja=n=>n!=null&&n.startsWith("0")?`62${n.slice(1)}`:n,je=n=>{const a=n==null?void 0:n.replace(/[^\d]/g,"");return`Rp ${parseInt(a,10).toLocaleString("id-ID")}`},Ie=n=>n.replace(/[^\d]/g,""),pa=()=>{const{user:n}=ie(x=>x.user),{data:a}=Je(n==null?void 0:n.id,{skip:!(n!=null&&n.id)}),[f,{data:g,isSuccess:s,error:F,isLoading:_,reset:b}]=Qe(),[r,P]=t.useState({userId:n==null?void 0:n.id,ayahNik:"",ayahNama:"",ayahTempatLahir:"",ayahTanggalLahir:"",ayahPendidikan:"SD",ayahPekerjaan:"",ayahPenghasilan:"",ayahNoTlp:"",ibuNik:"",ibuNama:"",ibuTempatLahir:"",ibuTanggalLahir:"",ibuPendidikan:"SD",ibuPekerjaan:"",ibuPenghasilan:"",ibuNoTlp:""}),m=x=>{const{name:j,value:S}=x.target;P(y=>({...y,[j]:j==="ayahNoTlp"||j==="ibuNoTlp"?ja(S):S,userId:y.userId||(n==null?void 0:n.id)}))},h=x=>{const{name:j,value:S}=x.target;P(y=>({...y,[j]:je(S),userId:y.userId||(n==null?void 0:n.id)}))},N=x=>{x.preventDefault();const j={...r,ayahPenghasilan:Ie(r.ayahPenghasilan),ibuPenghasilan:Ie(r.ibuPenghasilan)};f(j),console.log(j)};return t.useEffect(()=>{s&&(L.success(g.message),P({userId:n==null?void 0:n.id,ayahNik:"",ayahNama:"",ayahTempatLahir:"",ayahTanggalLahir:"",ayahPendidikan:"SD",ayahPekerjaan:"",ayahPenghasilan:"",ayahNoTlp:"",ibuNik:"",ibuNama:"",ibuTempatLahir:"",ibuTanggalLahir:"",ibuPendidikan:"SD",ibuPekerjaan:"",ibuPenghasilan:"",ibuNoTlp:""}),b()),F&&(L.error(F.data.message),b())},[g,s,F]),t.useEffect(()=>{a&&P({userId:a==null?void 0:a.userid,ayahNik:a==null?void 0:a.nik_ayah,ayahNama:a==null?void 0:a.nama_ayah,ayahTempatLahir:a==null?void 0:a.lahir_ayah,ayahTanggalLahir:a!=null&&a.tanggal_ayah?Ne(a==null?void 0:a.tanggal_ayah):"",ayahPendidikan:a!=null&&a.pendidikan_ayah?a==null?void 0:a.pendidikan_ayah:"SD",ayahPekerjaan:a==null?void 0:a.pekerjaan_ayah,ayahPenghasilan:a!=null&&a.penghasilan_ayah?je(a==null?void 0:a.penghasilan_ayah):0,ayahNoTlp:a==null?void 0:a.tlp_ayah,ibuNik:a==null?void 0:a.nik_ibu,ibuNama:a==null?void 0:a.nama_ibu,ibuTempatLahir:a==null?void 0:a.lahir_ibu,ibuTanggalLahir:a!=null&&a.tanggal_ibu?Ne(a==null?void 0:a.tanggal_ibu):"",ibuPendidikan:a!=null&&a.pendidikan_ibu?a==null?void 0:a.pendidikan_ibu:"SD",ibuPekerjaan:a==null?void 0:a.pekerjaan_ibu,ibuPenghasilan:a!=null&&a.penghasilan_ibu?je(a==null?void 0:a.penghasilan_ibu):0,ibuNoTlp:a==null?void 0:a.tlp_ibu})},[a]),e.jsx(T,{sx:{mt:1},children:e.jsxs("form",{className:"formulir",onSubmit:N,children:[e.jsxs(T,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(pe,{children:e.jsx(be,{})}),e.jsx(ve,{variant:"h6",children:"Data Ayah"})]}),e.jsx(c,{required:!0,label:"NIK",size:"small",name:"ayahNik",value:r.ayahNik,onChange:m}),e.jsx(c,{required:!0,label:"Nama Ayah",size:"small",name:"ayahNama",value:r.ayahNama,onChange:m}),e.jsxs(T,{sx:{display:"flex",gap:1},children:[e.jsx(c,{required:!0,label:"Tempat Lahir",size:"small",name:"ayahTempatLahir",value:r.ayahTempatLahir,onChange:m}),e.jsx(c,{type:"date",required:!0,label:"Tanggal Lahir",size:"small",name:"ayahTanggalLahir",value:r.ayahTanggalLahir,onChange:m,slotProps:{inputLabel:{shrink:!0}}})]}),e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Pendidikan"}),e.jsxs(E,{name:"ayahPendidikan",label:"Pendidikan",value:r.ayahPendidikan,onChange:m,children:[e.jsx(d,{value:"SD",children:"SD"}),e.jsx(d,{value:"SMP Sederajat",children:"SMP Sederajat"}),e.jsx(d,{value:"SMA Sederajat",children:"SMA Sederajat"}),e.jsx(d,{value:"D1",children:"D1"}),e.jsx(d,{value:"D2",children:"D2"}),e.jsx(d,{value:"D3",children:"D3"}),e.jsx(d,{value:"S1",children:"S1"}),e.jsx(d,{value:"S2",children:"S2"}),e.jsx(d,{value:"S3",children:"S3"})]})]}),e.jsx(c,{required:!0,label:"Pekerjaan",size:"small",name:"ayahPekerjaan",value:r.ayahPekerjaan,onChange:m}),e.jsx(c,{required:!0,label:"Penghasilan",size:"small",name:"ayahPenghasilan",slotProps:{inputLabel:{shrink:!0}},value:r.ayahPenghasilan,onChange:h}),e.jsx(c,{type:"number",required:!0,label:"No TLP",size:"small",name:"ayahNoTlp",value:r.ayahNoTlp,onChange:m}),e.jsxs(T,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(pe,{children:e.jsx(be,{})}),e.jsx(ve,{variant:"h6",children:"Data Ibu"})]}),e.jsx(c,{required:!0,label:"NIK",size:"small",name:"ibuNik",value:r.ibuNik,onChange:m}),e.jsx(c,{required:!0,label:"Nama Ibu",size:"small",name:"ibuNama",value:r.ibuNama,onChange:m}),e.jsxs(T,{sx:{display:"flex",gap:1},children:[e.jsx(c,{required:!0,label:"Tempat Lahir",size:"small",name:"ibuTempatLahir",value:r.ibuTempatLahir,onChange:m}),e.jsx(c,{type:"date",required:!0,label:"Tanggal Lahir",size:"small",name:"ibuTanggalLahir",value:r.ibuTanggalLahir,onChange:m,slotProps:{inputLabel:{shrink:!0}}})]}),e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Pendidikan"}),e.jsxs(E,{name:"ibuPendidikan",label:"Pendidikan",value:r.ibuPendidikan,onChange:m,children:[e.jsx(d,{value:"SD",children:"SD"}),e.jsx(d,{value:"SMP Sederajat",children:"SMP Sederajat"}),e.jsx(d,{value:"SMA Sederajat",children:"SMA Sederajat"}),e.jsx(d,{value:"D1",children:"D1"}),e.jsx(d,{value:"D2",children:"D2"}),e.jsx(d,{value:"D3",children:"D3"}),e.jsx(d,{value:"S1",children:"S1"}),e.jsx(d,{value:"S2",children:"S2"}),e.jsx(d,{value:"S3",children:"S3"})]})]}),e.jsx(c,{required:!0,label:"Pekerjaan",size:"small",name:"ibuPekerjaan",value:r.ibuPekerjaan,onChange:m}),e.jsx(c,{required:!0,label:"Penghasilan",size:"small",name:"ibuPenghasilan",slotProps:{inputLabel:{shrink:!0}},value:r.ibuPenghasilan,onChange:h}),e.jsx(c,{type:"number",required:!0,label:"No TLP",size:"small",name:"ibuNoTlp",value:r.ibuNoTlp,onChange:m}),e.jsx(T,{alignSelf:"end",children:e.jsx(O,{sx:{textTransform:"none"},variant:"contained",color:"success",type:"submit",children:_?e.jsx(de,{size:24}):" Simpan"})})]})})},va=()=>{const{user:n}=ie(u=>u.user),{data:a}=He(n==null?void 0:n.id,{skip:!(n!=null&&n.id)}),[f,{data:g,isSuccess:s,isLoading:F,error:_,reset:b}]=Oe(),[r,P]=t.useState(""),[m,h]=t.useState(""),[N,x]=t.useState(""),[j,S]=t.useState(""),[y,A]=t.useState(""),[v,p]=t.useState(""),[z,k]=t.useState({id:"",nama:""}),[o,C]=t.useState({id:"",nama:""}),[B,J]=t.useState({id:"",nama:""}),[Z,X]=t.useState({id:"",nama:""}),{data:V}=Le(),{data:Q}=ze(N,{skip:!N}),{data:U}=Ke(j,{skip:!j}),{data:W}=Ae(y,{skip:!y}),w=u=>{var K;const D=u.target.value,M=((K=V.find(G=>G.id===D))==null?void 0:K.nama)||"";k({id:D,nama:M}),x(D)},ee=u=>{var K;const D=u.target.value,M=((K=Q.find(G=>G.id.trim()===D))==null?void 0:K.nama)||"";C({id:D,nama:M}),S(D)},ae=u=>{var K;const D=u.target.value,M=((K=U.find(G=>G.id.trim()===D))==null?void 0:K.nama)||"";J({id:D,nama:M}),A(D)},ne=u=>{var K;const D=u.target.value,M=((K=W.find(G=>G.id.trim()===D))==null?void 0:K.nama)||"";X({id:D,nama:M}),p(D)},se=u=>{u.preventDefault(),f({userId:n==null?void 0:n.id,npsn:r,name:m,provinsi:z.nama,provinsi_id:z.id,regional:o.nama,regional_id:o.id,kecamatan:B.nama,kec_id:B.id,desa:Z.nama,desa_id:Z.id})};return t.useEffect(()=>{s&&(L.success(g.message),b(),P(""),h(""),k({id:"",nama:""}),C({id:"",nama:""}),J({id:"",nama:""}),X({id:"",nama:""}),x(""),S(""),A(""),p("")),_&&(L.error(_.data.message),b())},[s,_,g,b]),t.useEffect(()=>{var u,D,M;a&&(P(a==null?void 0:a.npsn),h(a==null?void 0:a.nama_sekolah),x(a==null?void 0:a.provinsi_id_sekolah),k({id:a==null?void 0:a.provinsi_id_sekolah,nama:a==null?void 0:a.provinsi_sekolah}),S(a==null?void 0:a.regional_id_sekolah),C({id:a==null?void 0:a.regional_id_sekolah,nama:a==null?void 0:a.regional_sekolah}),A((u=a==null?void 0:a.kec_id_sekolah)==null?void 0:u.trim()),J({id:a==null?void 0:a.kec_id_sekolah,nama:a==null?void 0:a.kec_sekolah}),p((D=a==null?void 0:a.desa_id_sekolah)==null?void 0:D.trim()),X({id:(M=a==null?void 0:a.desa_id_sekolah)==null?void 0:M.trim(),nama:a==null?void 0:a.desa_sekolah}))},[a]),e.jsx(T,{sx:{mt:1},children:e.jsxs("form",{className:"formulir",onSubmit:se,children:[e.jsx(c,{label:"NPSN",size:"small",value:r||"",onChange:u=>P(u.target.value)}),e.jsx(c,{label:"Nama Sekolah Asal",size:"small",value:m||"",onChange:u=>h(u.target.value)}),e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Provinsi"}),e.jsx(E,{value:N||"",label:"Provinsi",onChange:w,children:V==null?void 0:V.map(u=>e.jsx(d,{value:u.id,children:u.nama},u.id))})]}),e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Kota / Kabupaten"}),e.jsx(E,{value:j||"",label:"Kota / Kabupaten",onChange:ee,children:Q==null?void 0:Q.map(u=>e.jsx(d,{value:u.id,children:u.nama},u.id))})]}),e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Kecamatan"}),e.jsx(E,{value:y||"",label:"Kecamatan",onChange:ae,children:U==null?void 0:U.map(u=>e.jsx(d,{value:u.id.trim(),children:u.nama},u.id))})]}),e.jsxs(R,{size:"small",children:[e.jsx(q,{children:"Desa / Kelurahan"}),e.jsx(E,{value:v||"",label:"Desa / Kelurahan",onChange:ne,children:W==null?void 0:W.map(u=>e.jsx(d,{value:u.id.trim(),children:u.nama},u.id.trim()))})]}),e.jsx(T,{alignSelf:"end",children:e.jsx(O,{variant:"contained",color:"success",type:"submit",sx:{textTransform:"none"},children:F?e.jsx(de,{size:24}):"Simpan"})})]})})};var Pe={},ba=fe;Object.defineProperty(Pe,"__esModule",{value:!0});var Ce=Pe.default=void 0,Sa=ba(Se()),fa=e;Ce=Pe.default=(0,Sa.default)((0,fa.jsx)("path",{d:"M7 11v2h10v-2zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"RemoveCircleOutlineOutlined");const ya=()=>{const{user:n}=ie(p=>p.user),{data:a,refetch:f}=Ve(n==null?void 0:n.id,{skip:!(n!=null&&n.id)}),[g,{isSuccess:s,isLoading:F,error:_,reset:b}]=Ue(),[r,{delSuccess:P,delError:m,delReset:h}]=We(),[N,x]=t.useState(""),[j,S]=t.useState(null),y=p=>{p.preventDefault();const z={userId:n==null?void 0:n.id,note:{id:j||Date.now(),note_kesehatan:N}};g(z)};t.useEffect(()=>{s&&(L.success("Data berhasil disimpan"),x(""),S(null),b(),f()),_&&(L.error("Gagal menyimpan data"),b())},[s,_,b,f]),t.useEffect(()=>{P&&(L.success("Data berhasil dihapus"),h(),f()),m&&(L.error("Gagal menghapus data"),h())},[P,m,h,f]);const A=p=>{x(p.note_kesehatan),S(p.id)},v=p=>{const z={userId:n==null?void 0:n.id,noteId:p};r(z)};return e.jsx(T,{sx:{mt:1},children:e.jsxs("form",{className:"formulir",onSubmit:y,children:[e.jsx(c,{label:"Catatan Kesehatan",value:N,onChange:p=>x(p.target.value)}),e.jsx(T,{alignSelf:"end",children:e.jsx(O,{variant:"contained",color:"success",type:"submit",sx:{textTransform:"none"},children:F?e.jsx(de,{size:24}):"Simpan"})}),e.jsx(Fe,{children:e.jsxs(ye,{children:[e.jsx(Re,{children:e.jsx(ue,{children:["No","Catatan","Aksi"].map(p=>e.jsx(H,{align:"center",children:p},p))})}),e.jsx(ke,{children:a==null?void 0:a.map((p,z)=>e.jsxs(ue,{children:[e.jsx(H,{align:"center",children:z+1}),e.jsx(H,{children:p.note_kesehatan}),e.jsxs(H,{align:"center",children:[e.jsx(he,{onClick:()=>A(p),color:"warning",children:e.jsx(Me,{})}),e.jsx(he,{onClick:()=>v(p.id),color:"error",children:e.jsx(Ce,{})})]})]},z))})]})})]})})},ka=()=>{const{user:n}=ie(k=>k.user),{data:a}=Ye(n==null?void 0:n.id,{skip:!(n!=null&&n.id)}),[f,{data:g,isSuccess:s,isLoading:F,error:_,reset:b}]=Xe(),[r,{data:P,isSuccess:m,error:h,isLoading:N,reset:x}]=Ze(),[j,S]=t.useState({KK:null,Akta:null,Ayah:null,Ibu:null,IJSKL:null,Foto:null,Rapot:null}),y="application/pdf",A=["image/jpeg","image/png","image/gif"],v=k=>{const{name:o,files:C}=k.target,B=C[0];if(o==="Foto"){if(!A.includes(B.type)){L.error("pastikan file jpg dan png"),S({Foto:null});return}}else if(B.type!==y){L.error("Pastikan file PDF"),S({KK:null,Akta:null,Ayah:null,Ibu:null,IJSKL:null,Foto:null,Rapot:null});return}S(J=>({...J,[o]:B}))},p=k=>{k.preventDefault();const o=new FormData;Object.keys(j).forEach(C=>{j[C]&&o.append(C,j[C])}),f(o)},z=k=>{r({userId:n==null?void 0:n.id,fileKey:k})};return t.useEffect(()=>{s&&(L.success(g.message),b(),S({KK:null,Akta:null,Ayah:null,Ibu:null,IJSKL:null,Foto:null,Rapot:null})),_&&(L.error(_.data.message),console.log(_))},[s,_,g]),t.useEffect(()=>{m&&(L.success(P.message),x()),h&&(L.error(h.data.message),x())},[m,P,h]),e.jsx(T,{sx:{mt:1},children:e.jsxs("form",{onSubmit:p,className:"formulir",children:[e.jsx(ye,{children:e.jsx(ke,{children:[{label:"Kartu Keluarga",name:"KK"},{label:"Akta Kelahiran",name:"Akta"},{label:"KTP Ayah",name:"Ayah"},{label:"KTP Ibu",name:"Ibu"},{label:"Ijazah / SKL",name:"IJSKL"},{label:"Foto",name:"Foto"},{label:"Rapot",name:"Rapot"}].map(k=>{const o=a==null?void 0:a.find(C=>C[k.name]);return e.jsxs(ue,{children:[e.jsxs(H,{sx:{width:200},children:[" ",k.label]}),e.jsx(H,{align:"center",sx:{width:20},children:":"}),e.jsx(H,{children:o?e.jsxs(T,{children:[e.jsx(O,{variant:"contained",color:"error",sx:{mr:2},onClick:()=>z(k.name),children:N?e.jsx(de,{size:24}):"Hapus"}),e.jsx(O,{variant:"contained",color:"primary",href:o[k.name],target:"_blank",rel:"noopener noreferrer",children:"Link"})]}):e.jsx(we,{type:"file",name:k.name,accept:k.name==="Foto"?"image/*":"application/pdf",onChange:v})})]},k.name)})})}),e.jsx(T,{alignSelf:"end",sx:{textAlign:"center",mt:2},children:e.jsx(O,{variant:"contained",color:"success",type:"submit",sx:{textTransform:"none"},children:F?e.jsx(de,{size:24}):"Simpan"})})]})})};var De={},_a=fe;Object.defineProperty(De,"__esModule",{value:!0});var qe=De.default=void 0,Pa=_a(Se()),Ca=e;qe=De.default=(0,Pa.default)((0,Ca.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"}),"KeyboardArrowDown");const Da=()=>{const{user:n}=ie(o=>o.user),{data:a,refetch:f}=ea(n==null?void 0:n.id,{skip:!(n!=null&&n.id)}),[g,{data:s,isSuccess:F,isLoading:_,error:b,reset:r}]=aa(),[P,{isSuccess:m,error:h,reset:N}]=na(),[x,j]=t.useState(""),[S,y]=t.useState(""),[A,v]=t.useState(null),p=o=>{o.preventDefault();const C={userId:n==null?void 0:n.id,note:{id:A||Date.now(),nama:x,tanggal_lahir:S||null}};g(C)};t.useEffect(()=>{F&&(L.success(s.message),j(""),y(""),v(null),r(),f()),b&&(L.error(b.data.message),r())},[s,F,b,r,f]),t.useEffect(()=>{m&&(L.success("Data berhasil dihapus"),N(),f()),h&&(L.error(h.data.message),N())},[m,h,N,f]);const z=o=>{j(o.nama),y(o.tanggal_lahir),v(o.id)},k=o=>{const C={userId:n==null?void 0:n.id,familyId:o};P(C)};return e.jsx(T,{sx:{mt:2},children:e.jsxs("form",{className:"formulir",onSubmit:p,children:[e.jsxs(T,{sx:{display:"flex",gap:1,alignItems:"center",justifyContent:"end"},children:[e.jsx(c,{label:"Nama",size:"small",value:x,onChange:o=>j(o.target.value)}),e.jsx(c,{type:"date",size:"small",label:"Tanggal Lahir",slotProps:{inputLabel:{shrink:!0}},value:S,onChange:o=>y(o.target.value)}),e.jsx(O,{variant:"contained",color:"success",type:"submit",sx:{textTransform:"none"},children:_?e.jsx(de,{size:24}):"Simpan"})]}),e.jsx(Fe,{children:e.jsxs(ye,{children:[e.jsx(Re,{children:e.jsx(ue,{children:["No","Nama","Lahir","Aksi"].map(o=>e.jsx(H,{align:"center",children:o},o))})}),e.jsx(ke,{children:a==null?void 0:a.map((o,C)=>e.jsxs(ue,{children:[e.jsx(H,{align:"center",children:C+1}),e.jsx(H,{children:o.nama}),e.jsx(H,{align:"center",children:o.tanggal_lahir}),e.jsxs(H,{align:"center",children:[e.jsx(he,{onClick:()=>z(o),color:"warning",children:e.jsx(Me,{})}),e.jsx(he,{onClick:()=>k(o.id),color:"error",children:e.jsx(Ce,{})})]})]},C))})]})})]})})},Aa=()=>{var S,y,A;const[n,a]=t.useState("Data Diri"),[f,g]=t.useState(null),s=!!f,F=v=>g(v.currentTarget),_=()=>g(null),{user:b}=ie(v=>v.user),{data:r}=sa(),{data:P}=ta(),{data:m}=ia(),{data:h}=la(b==null?void 0:b.id,{skip:!(b!=null&&b.id)}),N=(y=(S=h==null?void 0:h.berkas)==null?void 0:S.find(v=>v.Foto))==null?void 0:y.Foto,x=[{name:"Data Diri",component:e.jsx(ua,{tapel:r,edu:P,schools:m})},{name:"Alamat",component:e.jsx(ha,{})},{name:"Orang Tua",component:e.jsx(pa,{})},{name:"Data Sekolah",component:e.jsx(va,{})},{name:"Kesehatan",component:e.jsx(ya,{})},{name:"Keluarga",component:e.jsx(Da,{})},{name:"Berkas",component:e.jsx(ka,{})}],j=(A=x.find(v=>v.name===n))==null?void 0:A.component;return e.jsx(ra,{children:e.jsxs(ce,{container:!0,children:[e.jsx(ce,{item:!0,size:{xs:12,md:2},sx:{p:1},children:e.jsxs(T,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[e.jsx(pe,{sx:{width:80,height:80},alt:h==null?void 0:h.nama,src:N}),e.jsx(ve,{variant:"body2",children:"Status Pendaftaran"}),e.jsx(O,{variant:"contained",color:"warning",children:h==null?void 0:h.status_pendaftaran})]})}),e.jsxs(ce,{item:!0,size:{xs:12,md:7},sx:{px:4,py:1},children:[e.jsx(T,{textAlign:"center",sx:{display:{xs:"none",md:"block"}},children:e.jsx(oa,{children:x.map(v=>e.jsx(O,{variant:n===v.name?"contained":"outlined",sx:{textTransform:"none"},onClick:()=>a(v.name),children:v.name},v.name))})}),e.jsx(O,{fullWidth:!0,variant:"contained",color:"primary",endIcon:e.jsx(qe,{}),onClick:F,sx:{display:{xs:"flex",md:"none"},mb:2},children:n}),e.jsx(da,{id:"demo-positioned-menu","aria-labelledby":"demo-positioned-button",anchorEl:f,open:s,onClose:_,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:x.map(v=>e.jsx(d,{onClick:()=>{a(v.name),_()},children:v.name},v.name))}),j]}),e.jsx(ce,{item:!0,size:{xs:12,md:3},sx:{p:1},children:e.jsx(ca,{})})]})})};export{Aa as default};
