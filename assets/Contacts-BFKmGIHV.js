import{r as t,az as D,aA as H,aB as I,aC as M,B as i,j as e,G as j,P as y,z as S,C as v,d as N,J as z,e as R}from"./index-C2nBX7QG.js";import{L as W}from"./Layout-C20c01LT.js";import{d as w}from"./EditOutlined-dIVNS1oM.js";import{d as Q}from"./DoNotDisturbOnOutlined-6U0CUkD-.js";import{T as _}from"./TableContainer-F9nuIoYK.js";import{T as $}from"./Table-D9-S9Xm5.js";import{T as J}from"./TableHead-BKk-Fma7.js";import{T as B,a as n,b as q}from"./TableRow-BPe-Hqaj.js";const F=a=>a!=null&&a.startsWith("0")?`62${a.slice(1)}`:a,ae=()=>{const[a,l]=t.useState(""),[p,o]=t.useState(""),[f,c]=t.useState(""),{data:d}=D(),{data:r}=H(a,{skip:!a}),[E,{data:h,isSuccess:g,error:u,isLoading:L,reset:C}]=I(),[P,{data:b,isSuccess:T,error:x,isLoading:k,reset:K}]=M(),G=s=>{s.preventDefault(),E({name:p,phone:f,id:a||null})},A=s=>P(s);return t.useEffect(()=>{r&&(o(r.nama),c(r.tlp),l(r.id))},[r]),t.useEffect(()=>{g&&(i.success(h.message),o(""),c(""),l(""),C()),u&&(C(),i.error(u.data.message))},[g,u,h]),t.useEffect(()=>{T&&i.success(b.message),x&&i.error(x.data.message)},[T,x,b]),e.jsx(W,{children:e.jsxs(j,{container:!0,children:[e.jsx(j,{item:!0,size:{xs:12,md:8},children:e.jsx(y,{children:e.jsx(_,{children:e.jsxs($,{children:[e.jsx(J,{children:e.jsx(B,{children:["No","Nama","No Whatsapp","Aksi"].map(s=>e.jsx(n,{align:"center",children:s},s))})}),e.jsx(q,{children:d==null?void 0:d.map((s,m)=>e.jsxs(B,{children:[e.jsx(n,{align:"center",children:m+1}),e.jsx(n,{children:s.nama}),e.jsx(n,{align:"center",children:s.tlp}),e.jsxs(n,{align:"center",children:[e.jsx(S,{color:"warning",onClick:()=>l(s.id),children:e.jsx(w,{})}),e.jsx(S,{color:"error",onClick:()=>A(s.id),children:k?e.jsx(v,{size:24}):e.jsx(Q,{})})]})]},m))})]})})})}),e.jsx(j,{item:!0,size:{xs:12,md:4},sx:{py:1,px:4},children:e.jsx(y,{sx:{p:1},children:e.jsx("form",{onSubmit:G,children:e.jsxs(N,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(z,{type:"text",placeholder:"Nama",value:p,onChange:s=>o(s.target.value)}),e.jsx(z,{type:"number",placeholder:"No Whatsapp",value:f,onChange:s=>c(F(s.target.value))}),e.jsx(N,{alignSelf:"end",children:e.jsx(R,{variant:"contained",color:"success",type:"submit",children:L?e.jsx(v,{size:24}):"Simpan"})})]})})})})]})})};export{ae as default};
