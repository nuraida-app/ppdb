import{bF as J,r as s,bG as V,bH as Y,bI as Z,B as l,j as e,P as ee,O as ae,$ as se,k as R,l as I,X as te,ag as re,M as j}from"./index-ptVWyzqq.js";import{L as ne}from"./Layout-8rPJRVNh.js";import{d as oe}from"./MoreVert-DcSPWgTI.js";/* empty css               */import{L,d as B}from"./WhatsApp-DyDDWVRW.js";import{T as ce}from"./TableContainer-DvT8E7Np.js";import{T as le}from"./Table-B3F95sbF.js";import{T as ie}from"./TableHead-BLp_PiE7.js";import{T as E,a as r,b as de}from"./TableRow-DnCyyA8q.js";import{T as ue}from"./TablePagination-C7PkpGgP.js";import"./KeyboardArrowRight-DlkEaIPU.js";const he=[{label:"No",width:40},{label:"Kode Pendaftaran",width:80},{label:"Pendaftar",width:120},{label:"Whatsapp",width:120},{label:"Status",width:80},{label:"Aksi",width:30}],ye=()=>{var _;const M=J(),[b,f]=s.useState(null),[i,$]=s.useState(""),[A,N]=s.useState(""),[P,H]=s.useState(""),[c,w]=s.useState(0),[o,W]=s.useState(10),[pe,F]=s.useState([]),d=!!b,G=(a,t,g,z)=>{f(a.currentTarget),$(t),N(g),F(z||[])},u=()=>{f(null)},[K,{data:C,isSuccess:k,error:h,reset:T}]=V(),[O,{data:y,isSuccess:S,error:p,reset:v}]=Y(),{data:m}=Z(),x=m==null?void 0:m.filter(a=>a.status_pendaftaran==="Diproses"),n=x==null?void 0:x.filter(a=>a.kode_pendaftaran.toLowerCase().includes(P.toLowerCase())),D=()=>{K(i),u()},Q=()=>{O(i),u()};s.useEffect(()=>{k&&(l.success(C.message),T()),h&&(l.error(h.data.message),T())},[C,k,h]),s.useEffect(()=>{S&&(l.success(y.message),v()),p&&(l.error(p.data.message),v())},[y,S,p]);const U=(a,t)=>{w(t)},X=a=>{W(parseInt(a.target.value,10)),w(0)},q=()=>{const a=A.replace(/\s+/g,"-");M(`/admin/pelajar/${i}/${a}`)};return e.jsxs(ne,{children:[e.jsxs(ee,{sx:{p:1},children:[e.jsx(ae,{variant:"h6",fontWeight:"bold",children:"Pendaftar Baru"}),e.jsx(se,{type:"text",placeholder:"Kode Pendaftaran",value:P,onChange:a=>H(a.target.value),sx:{my:1}}),e.jsx(ce,{children:e.jsxs(le,{children:[e.jsx(ie,{children:e.jsx(E,{children:he.map((a,t)=>e.jsx(r,{align:"center",sx:{minWidth:a.width},children:a.label},t))})}),e.jsx(de,{children:(_=n==null?void 0:n.slice(c*o,c*o+o))==null?void 0:_.map((a,t)=>e.jsxs(E,{children:[e.jsx(r,{align:"center",children:c*o+t+1}),e.jsx(r,{align:"center",children:a.kode_pendaftaran}),e.jsx(r,{children:a.nama}),e.jsxs(r,{children:[e.jsxs(L,{onClick:()=>window.open(`https://wa.me/${a.tlp_ayah}`,"_blank"),children:[e.jsx(R,{children:e.jsx(B,{color:"success"})}),e.jsx(I,{primary:"Ayah",secondary:a.tlp_ayah})]}),e.jsxs(L,{onClick:()=>window.open(`https://wa.me/${a.tlp_ibu}`,"_blank"),children:[e.jsx(R,{children:e.jsx(B,{color:"success"})}),e.jsx(I,{primary:"ibu",secondary:a.tlp_ibu})]})]}),e.jsx(r,{align:"center",children:e.jsx("div",{className:"menunggu",children:a.status_pendaftaran})}),e.jsx(r,{align:"center",children:e.jsx(te,{color:"primary",id:"basic-button","aria-controls":d?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":d?"true":void 0,onClick:g=>G(g,a.userid,a.nama,a.berkas),children:e.jsx(oe,{})})})]},t))})]})}),e.jsx(ue,{component:"div",count:(n==null?void 0:n.length)||0,page:c,onPageChange:U,rowsPerPage:o,onRowsPerPageChange:X,rowsPerPageOptions:[10,25,50],labelRowsPerPage:"Rows per page"})]}),e.jsxs(re,{id:"basic-menu",anchorEl:b,open:d,onClose:u,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(j,{onClick:D,children:"Diterima"}),e.jsx(j,{onClick:Q,children:"Ditolak"}),e.jsx(j,{onClick:q,children:"Detail"})]})]})};export{ye as default};
