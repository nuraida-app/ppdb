import{r as a,Q as G,ap as I,aq as P,ar as A,B as i,j as e,G as x,P as y,z as m,C,d as Y,J as H,ao as M}from"./index-C2nBX7QG.js";import{L as Q}from"./Layout-C20c01LT.js";import{d as _}from"./Add-CmXcJvQH.js";import{d as q}from"./EditOutlined-dIVNS1oM.js";import{d as w}from"./DoNotDisturbOnOutlined-6U0CUkD-.js";import{T as D}from"./TableContainer-F9nuIoYK.js";import{T as J}from"./Table-D9-S9Xm5.js";import{T as N}from"./TableHead-BKk-Fma7.js";import{T as z,a as n,b as R}from"./TableRow-BPe-Hqaj.js";const ee=()=>{const[r,l]=a.useState(""),[j,o]=a.useState(""),{data:d}=G(),{data:t}=I(r,{skip:!r}),[E,{data:p,isSuccess:f,error:c,isLoading:S,reset:h}]=P(),[L,{data:g,isSuccess:b,error:u,isLoading:k}]=A(),v=s=>{s.preventDefault(),E({id:r||null,name:j})},B=s=>{L(s)};return a.useEffect(()=>{t&&(l(t.id),o(t.tapel))},[t]),a.useEffect(()=>{f&&(i.success(p.message),o(""),l(""),h()),c&&(i.error(c.data.message),h())},[p,c,f]),a.useEffect(()=>{b&&i.success(g.message),u&&i.error(u.data.message)},[g,u,b]),e.jsx(Q,{children:e.jsxs(x,{container:!0,children:[e.jsx(x,{item:!0,size:{xs:12,md:8},children:e.jsx(y,{children:e.jsx(D,{children:e.jsxs(J,{children:[e.jsx(N,{children:e.jsx(z,{children:["No","Tahun Pelajaran","Aksi"].map(s=>e.jsx(n,{align:"center",children:s},s))})}),e.jsx(R,{children:d==null?void 0:d.map((s,T)=>e.jsxs(z,{children:[e.jsx(n,{align:"center",children:T+1}),e.jsx(n,{align:"center",children:s.tapel}),e.jsxs(n,{align:"center",children:[e.jsx(m,{color:"warning",onClick:()=>l(s.id),children:e.jsx(q,{})}),e.jsx(m,{color:"error",onClick:()=>B(s.id),children:k?e.jsx(C,{size:24}):e.jsx(w,{})})]})]},s.id))})]})})})}),e.jsx(x,{item:!0,size:{xs:12,md:4},sx:{px:4},children:e.jsx(y,{sx:{p:1},children:e.jsx("form",{onSubmit:v,children:e.jsxs(Y,{sx:{display:"flex",gap:1},children:[e.jsx(H,{required:!0,fullWidth:!0,type:"text",placeholder:"Tambah Jenjang",value:j||"",onChange:s=>o(s.target.value)}),e.jsxs(Y,{sx:{position:"relative",display:"inline-flex"},children:[e.jsx(m,{type:"submit",color:"success",children:e.jsx(_,{})}),S&&e.jsx(C,{size:45,sx:{color:M[500],position:"absolute",top:-2.5,left:-2,transform:"translate(-50%, -50%)",zIndex:1}})]})]})})})})]})})};export{ee as default};
