import{m as H,n as R,j as e,u as w,a as z,X as U,Y as E,r as c,B as y,L as q,G as d,s as u,P as p,e as x,T as G,J as O,d as V,C as Q}from"./index-C2nBX7QG.js";import{T as J}from"./Table-D9-S9Xm5.js";import{b as X,T as v,a as r}from"./TableRow-BPe-Hqaj.js";var m={},Y=R;Object.defineProperty(m,"__esModule",{value:!0});var b=m.default=void 0,$=Y(H()),A=e;b=m.default=(0,$.default)((0,A.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V6h5.17l2 2H20zM9.41 14.42 11 12.84V17h2v-4.16l1.59 1.59L16 13.01 12.01 9 8 13.01z"}),"DriveFolderUploadOutlined");const K=l=>({__html:l}),ae=()=>{const l="pembayaran",{data:o}=w(l),{user:s}=z(a=>a.user),[P,{data:h,isSuccess:j,isLoading:T,error:i,reset:f}]=U(),{data:n,isLoading:N,refetch:k}=E(s==null?void 0:s.id,{skip:!(s!=null&&s.id)}),[C,L]=c.useState(null),[g,S]=c.useState(0),D=a=>{const t=a.replace(/[^\d]/g,"");return`Rp ${parseInt(t,10).toLocaleString("id-ID")}`},_=a=>a.replace(/[^\d]/g,""),B=a=>{S(D(a.target.value))},I=a=>{const t=a.target.files[0];L(t)},M=()=>{const a=new FormData;a.append("name",s.name),a.append("price",_(g)),a.append("file",C),P(a)},F=()=>{window.open(n.bukti,"_blank")};return c.useEffect(()=>{j&&(y.success(h.message),f(),k()),i&&(console.log(i),y.error(i.data.message),f())},[j,i,h]),e.jsx(q,{children:e.jsxs(d,{container:!0,children:[e.jsxs(d,{item:!0,size:{xs:12,md:8},sx:{p:2,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(u,{variant:"h5",children:"Pembayaran"}),e.jsx(p,{sx:{p:1},children:o==null?void 0:o.map((a,t)=>e.jsx(u,{variant:"body1",dangerouslySetInnerHTML:K(a.teks)},t))})]}),e.jsxs(d,{item:!0,size:{xs:12,md:4},sx:{p:2,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(u,{variant:"h6",children:"Upload Bukti Pembayaran"}),e.jsx(p,{children:e.jsx(J,{children:e.jsxs(X,{children:[e.jsxs(v,{children:[e.jsx(r,{children:"Status"}),e.jsx(r,{align:"center",children:":"}),e.jsx(r,{children:e.jsx(x,{variant:"contained",color:"warning",sx:{textTransform:"none"},children:n!=null&&n.status?n.status:"Belum ada pembayaran"})})]}),e.jsxs(v,{children:[e.jsx(r,{children:"Berkas"}),e.jsx(r,{align:"center",children:":"}),e.jsx(r,{children:e.jsx(x,{variant:"contained",color:"info",sx:{textTransform:"none"},onClick:F,children:"Link"})})]})]})})}),!n&&e.jsxs(p,{sx:{p:1,display:"flex",flexDirection:"column",gap:1},children:[e.jsx(G,{variant:"standard",value:g,onChange:B}),e.jsx(O,{type:"file",onChange:I,accept:"images/*"}),e.jsx(V,{alignSelf:"end",children:e.jsx(x,{variant:"contained",color:"success",startIcon:e.jsx(b,{}),onClick:M,children:T?e.jsx(Q,{size:24}):"Upload"})})]})]})]})})};export{ae as default};
