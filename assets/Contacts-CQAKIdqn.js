import{r as t,f as A,bz as H,bA as I,bB as M,B as i,j as e,G as j,P as y,X as S,D as v,q as N,$ as B,t as R}from"./index-B2bV4Il9.js";import{L as W}from"./Layout-Ch75INmX.js";import{d as $}from"./EditOutlined-DuEJ2EYt.js";import{d as w}from"./DoNotDisturbOnOutlined-cFt09IMr.js";import{T as Q}from"./TableContainer-eQ8CfYTH.js";import{T as _}from"./Table-alv5J-g6.js";import{T as q}from"./TableHead-CnoLD7CA.js";import{T as E,a as n,b as X}from"./TableRow-Bv-Ugp5X.js";import"./WhatsApp-CYr69H1w.js";const F=a=>a!=null&&a.startsWith("0")?`62${a.slice(1)}`:a,te=()=>{const[a,o]=t.useState(""),[p,l]=t.useState(""),[f,c]=t.useState(""),{data:d}=A(),{data:r}=H(a,{skip:!a}),[z,{data:h,isSuccess:g,error:u,isLoading:L,reset:b}]=I(),[P,{data:C,isSuccess:T,error:x,isLoading:k,reset:J}]=M(),D=s=>{s.preventDefault(),z({name:p,phone:f,id:a||null})},G=s=>P(s);return t.useEffect(()=>{r&&(l(r.nama),c(r.tlp),o(r.id))},[r]),t.useEffect(()=>{g&&(i.success(h.message),l(""),c(""),o(""),b()),u&&(b(),i.error(u.data.message))},[g,u,h]),t.useEffect(()=>{T&&i.success(C.message),x&&i.error(x.data.message)},[T,x,C]),e.jsx(W,{children:e.jsxs(j,{container:!0,children:[e.jsx(j,{item:!0,size:{xs:12,md:8},children:e.jsx(y,{children:e.jsx(Q,{children:e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(E,{children:["No","Nama","No Whatsapp","Aksi"].map(s=>e.jsx(n,{align:"center",children:s},s))})}),e.jsx(X,{children:d==null?void 0:d.map((s,m)=>e.jsxs(E,{children:[e.jsx(n,{align:"center",children:m+1}),e.jsx(n,{children:s.nama}),e.jsx(n,{align:"center",children:s.tlp}),e.jsxs(n,{align:"center",children:[e.jsx(S,{color:"warning",onClick:()=>o(s.id),children:e.jsx($,{})}),e.jsx(S,{color:"error",onClick:()=>G(s.id),children:k?e.jsx(v,{size:24}):e.jsx(w,{})})]})]},m))})]})})})}),e.jsx(j,{item:!0,size:{xs:12,md:4},sx:{py:1,px:4},children:e.jsx(y,{sx:{p:1},children:e.jsx("form",{onSubmit:D,children:e.jsxs(N,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(B,{type:"text",placeholder:"Nama",value:p,onChange:s=>l(s.target.value)}),e.jsx(B,{type:"number",placeholder:"No Whatsapp",value:f,onChange:s=>c(F(s.target.value))}),e.jsx(N,{alignSelf:"end",children:e.jsx(R,{variant:"contained",color:"success",type:"submit",children:L?e.jsx(v,{size:24}):"Simpan"})})]})})})})]})})};export{te as default};
