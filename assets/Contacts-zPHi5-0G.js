import{r as a,f as w,bz as A,bA as H,bB as I,B as i,j as e,G as j,P as y,X as S,D as v,q as N,$ as B,t as M}from"./index-Bi5ISG4_.js";import{L as R}from"./Layout-DiFwH0bA.js";import{d as W}from"./EditOutlined-DMp34MuU.js";import{d as $}from"./DoNotDisturbOnOutlined-DMD4iD1G.js";import{T as Q}from"./TableContainer-DT-5s-Yw.js";import{T as _}from"./Table-DNGmJGf1.js";import{T as q}from"./TableHead-CFg8ioG4.js";import{T as E,a as n,b as X}from"./TableRow-DiUi1Hq1.js";import"./WhatsApp-BMMQCJ2C.js";const F=t=>t!=null&&t.startsWith("0")?`62${t.slice(1)}`:t,ae=()=>{const[t,o]=a.useState(""),[p,l]=a.useState(""),[f,c]=a.useState(""),{data:d}=w(),{data:r}=A(t,{skip:!t}),[z,{data:h,isSuccess:g,error:u,isLoading:L,reset:b}]=H(),[P,{data:C,isSuccess:T,error:x,isLoading:k,reset:J}]=I(),D=s=>{s.preventDefault(),z({name:p,phone:f,id:t||null})},G=s=>P(s);return a.useEffect(()=>{r&&(l(r.nama),c(r.tlp),o(r.id))},[r]),a.useEffect(()=>{g&&(i.success(h.message),l(""),c(""),o(""),b()),u&&(b(),i.error(u.data.message))},[g,u,h]),a.useEffect(()=>{T&&i.success(C.message),x&&i.error(x.data.message)},[T,x,C]),e.jsx(R,{children:e.jsxs(j,{container:!0,children:[e.jsx(j,{item:!0,size:{xs:12,md:8},children:e.jsx(y,{children:e.jsx(Q,{children:e.jsxs(_,{children:[e.jsx(q,{children:e.jsx(E,{children:["No","Nama","No Whatsapp","Aksi"].map(s=>e.jsx(n,{align:"center",children:s},s))})}),e.jsx(X,{children:d==null?void 0:d.map((s,m)=>e.jsxs(E,{children:[e.jsx(n,{align:"center",children:m+1}),e.jsx(n,{children:s.nama}),e.jsx(n,{align:"center",children:s.tlp}),e.jsxs(n,{align:"center",children:[e.jsx(S,{color:"warning",onClick:()=>o(s.id),children:e.jsx(W,{})}),e.jsx(S,{color:"error",onClick:()=>G(s.id),children:k?e.jsx(v,{size:24}):e.jsx($,{})})]})]},m))})]})})})}),e.jsx(j,{item:!0,size:{xs:12,md:4},sx:{py:1,px:4},children:e.jsx(y,{sx:{p:1,position:"fixed",width:{lg:300,xl:330}},children:e.jsx("form",{onSubmit:D,children:e.jsxs(N,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(B,{type:"text",placeholder:"Nama",value:p,onChange:s=>l(s.target.value)}),e.jsx(B,{type:"number",placeholder:"No Whatsapp",value:f,onChange:s=>c(F(s.target.value))}),e.jsx(N,{alignSelf:"end",children:e.jsx(M,{variant:"contained",color:"success",type:"submit",children:L?e.jsx(v,{size:24}):"Simpan"})})]})})})})]})})};export{ae as default};
