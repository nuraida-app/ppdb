import{Q as N,S as y,T as v,r as d,j as e}from"./index-BU72W7iL.js";import{L as P,k,l as D}from"./Layout-BH6RVc04.js";import{h as C}from"./html2pdf-BiIb6DmX.js";import{M as w}from"./ModalComponent-DmMY5IEY.js";const I=s=>{const a=s.replace(/[^\d]/g,"");return`Rp ${parseInt(a,10).toLocaleString("id-ID")}`},S=s=>s.replace(/[^\d]/g,""),B=s=>{if(!s)return"-";const a=new Date(s);return new Intl.DateTimeFormat("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}).format(a)},q=()=>{const{user:s}=N(t=>t.user),{data:a}=y(s.id,{skip:!s.id}),[c,{data:u,isLoading:x,isSuccess:p,error:h,reset:f}]=v(),[n,i]=d.useState({file:null,nominal:0,nama:"",media:"default"}),r=t=>{const{name:l,value:m,files:g}=t.target;i(l==="file"?{...n,file:g[0]}:l==="nominal"?{...n,nominal:I(m)}:{...n,[l]:m})},j=()=>{if(!n.file||n.nominal===0||!n.nama||!n.media==="default"){alert("Pantikan semua form diisi");return}const t=new FormData;t.append("file",n.file),t.append("nominal",S(n.nominal)),t.append("nama",n.nama),t.append("media",n.media),c(t)},o=d.useRef(),b=()=>{const t=o.current,l={margin:10,filename:`${s==null?void 0:s.nama}-invoice.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"b5",orientation:"landscape"}};C().set(l).from(t).save()};return e.jsxs(P,{children:[e.jsx("div",{className:"container border-bottom py-2 mb-3",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsxs("div",{className:"col-12 col-md-6 mb-2 mb-md-0",children:[e.jsx("h4",{className:"m-0",children:"Pembayaran"}),e.jsxs("p",{children:["Status:"," ",e.jsx("strong",{className:`${a!=null&&a.ket?"text-success":"text-danger"} ms-2`,children:a?a!=null&&a.ket?"Terkonfirmasi":"Menunggu Konfirmasi":"Belum ada transaksi"})]})]}),e.jsxs("div",{className:"col-12 col-md-6 d-flex gap-2 justify-content-md-end flex-column flex-md-row",children:[e.jsxs("button",{className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#modal",disabled:!!a,children:[e.jsx(k,{size:20})," Pembayaran"]}),e.jsxs("button",{className:"btn btn-success",onClick:b,disabled:a?!(a!=null&&a.ket):!0,children:[e.jsx(D,{size:20})," Download"]})]})]})}),e.jsx("div",{className:"container mb-3",children:"Pembayaran untuk pendafataran dapat ditransfer ke Transfer ke No. Rek. Bank Muamalat 1210077935 a.n Yayasan Izzatul Muhsinin sebesar Rp 1.100.000"}),(a==null?void 0:a.ket)&&e.jsx("div",{ref:o,className:"card",style:{maxWidth:500},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Invoice"}),e.jsx("h6",{className:"card-subtitle mb-2 text-muted",children:"Pembayaran PPDB Nuraida Islamic Boarding School"}),e.jsx("div",{className:"card-text",children:e.jsx("table",{className:"table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-start",children:"Nama"}),e.jsx("td",{children:":"}),e.jsx("td",{className:"text-start",children:a==null?void 0:a.nama})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-start",children:"Pembayaran"}),e.jsx("td",{children:":"}),e.jsx("td",{className:"text-start",children:"PPDB"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-start",children:"Nominal"}),e.jsx("td",{children:":"}),e.jsx("td",{className:"text-start",children:`Rp ${parseFloat(a==null?void 0:a.nominal).toLocaleString("id")}`})]})]})})}),e.jsxs("div",{className:"d-flex flex-column justify-content-end align-items-end",children:[e.jsx("p",{className:"m-0",children:`Bogor, ${B(a==null?void 0:a.tgl_bayar)}`}),e.jsx("img",{src:"/logo.png",alt:"logo",height:"40",width:"40"}),e.jsx("p",{className:"m-0",children:"Petugas PPDB"})]})]})}),e.jsxs(w,{id:"modal",title:"Upload Berkas Pembayaran",isSuccess:p,data:u,error:h,reset:f,children:[e.jsxs("div",{className:"modal-body d-flex flex-column gap-2",children:[e.jsx("input",{type:"file",name:"file",id:"file",className:"form-control",onChange:r,required:!0}),e.jsx("input",{type:"text",name:"nominal",id:"nama",placeholder:"Nominal yang dibayarkan",className:"form-control",onChange:r,value:n.nominal,required:!0}),e.jsx("input",{type:"text",name:"nama",id:"nama",placeholder:"Nama calon siswa",className:"form-control",onChange:r,required:!0}),e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"media",onChange:r,required:!0,children:[e.jsx("option",{value:"defaultt",children:"Dapat dari mana informasi nuraida?"}),e.jsx("option",{value:"Intagram",children:"Instagram"}),e.jsx("option",{value:"YouTube",children:"YouTube"}),e.jsx("option",{value:"Pameran",children:"Pameran"}),e.jsx("option",{value:"Website",children:"Website"}),e.jsx("option",{value:"Kerabat",children:"Kerabat"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Tutup"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:j,children:x?e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"visually-hidden"})}):"Simpan"})]})]})]})};export{q as default};
